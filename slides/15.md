---
theme: seriph
background: https://source.unsplash.com/collection/94734566/1920x1080
class: "text-center"
lineNumbers: false
info: |
  ## ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©è³‡æ–™#15
  VANTAN Techgord Academy
  Created by [@kuwahara_jsri](https://twitter.com/kuwahara_jsri)
fonts:
  sans: "Josefin Sans"
  serif: "Noto Sans JP"
  mono: "Fira Code"
drawings:
  persist: false
highlighter: prism-xonokai
title: ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©
css: unocss
---

# ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©

VANTAN Techford Academy

### #15 ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨

<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

<div class="abs-br m-6 flex gap-2">
  <button @click="$slidev.nav.openInEditor()" title="Open in Editor" class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon:edit />
  </button>
  <a href="https://github.com/kkeeth/vantan-techford-p5js-slide" target="_blank" alt="GitHub"
    class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon-logo-github />
  </a>
</div>

---
layout: center
class: text-center
---

# å‡ºå¸­ ğŸ™‹

---
layout: center
---

# ä»Šæ—¥è©±ã™ã“ã¨ğŸ“‹

---

# â–¼ æ§˜ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã¿ã‚ˆã†

<br />


## ğŸ‘‰ è»½ãå‰å›ã®å¾©ç¿’
<br />

## ğŸ‘‰ p5.Sound

<br />

## ğŸ‘‰ p5.Polar

<br />

## ğŸ‘‰ c2.js

---
layout: center
---

# æˆæ¥­è³‡æ–™ğŸ“‹
<br />

[https://vantan-techford-p5js-slide.vercel.app/](https://vantan-techford-p5js-slide.vercel.app/)

<br />

<img width="600" class="mx-auto" src="/assets/1/text.png" alt="è¬›ç¾©è³‡æ–™" />

---
layout: center
---

# è»½ãå‰å›ã®å¾©ç¿’ğŸ“

---
layout: center
---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°åŸºç¤

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°(Easing)ã¨ã¯ï¼Ÿ

<br />

ã‚ã‚‹ç‰©ä½“ã‚’åœ°ç‚¹Aã‹ã‚‰åœ°ç‚¹Bã¾ã§ç§»å‹•ã•ã›ã‚‹ã¨ãã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®é€Ÿåº¦ã‚’å¤‰åŒ–ã•ã›ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã®ã“ã¨ğŸ’ `css` ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ãŸã“ã¨ãŒã‚ã‚‹æ–¹ãªã‚‰ï¼ŒãŠãã‚‰ãè¦‹ãŸã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ï¼

â€»å³å¯†ãªå®šç¾©ã§ã¯ãªã„ã§ã™

ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã¯å…ƒã€…Flashé–‹ç™ºè€…ã® [Robert Penner](https://en.wikipedia.org/wiki/Robert_Penner) æ°ãŒè€ƒæ¡ˆã—ãŸã‚‚ã®ã§ï¼Œã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é–¢æ•°(Easing Function)ã¨å‘¼ã°ã‚Œã‚‹æ•°å­¦ã‚’é§†ä½¿ã—ãŸé–¢æ•°ã§å®Ÿç¾ã•ã‚Œã¾ã™ï¼


---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã¾ã¨ã‚ã‚µã‚¤ãƒˆ

[https://easings.net](https://easings.net)

<img src="/assets/14/easing-demo.png" class="mx-auto" />

---

# `Linear Interpolation` ã®å®Ÿè£…

<br />

ç°¡å˜ãªä¾‹ï¼ˆ`Linear Interpolation` ã¨è¨€ã£ãŸã‚Šã—ã¾ã™ï¼‰ã§ã‚ã‚Œã°å®Ÿè£…ã¯å¯èƒ½ãªã®ã§æ›¸ã„ã¦ã¿ã¾ã™ğŸ™‹

ã¾ãšã¯ã„ã¤ã‚‚ã®æº–å‚™ã‹ã‚‰

```js
let x = 1;
let y = 1;
let easing = 0.08;

function setup() {
  createCanvas(windowWidth, windowHeight);
  noStroke();
}
```

---

# `Linear Interpolation` ã®å®Ÿè£…ï¼ˆç¶šãï¼‰

```js
function draw() {
  background(237, 34, 93);

  x += (mouseX - x) * easing;
  y += (mouseY - y) * easing;

	ellipse(mouseX, mouseY, 30, 30);
  ellipse(x, y, 100, 100);

  push()
  stroke(0);
  strokeWeight(3)
  line(x, y, mouseX, mouseY)
  pop()
}
```

---

# ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

<img src="/assets/14/easing-mechanism.png" class="mx-auto" alt="ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ " />

---

# p5.func ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<br />

[p5.func](https://idmnyu.github.io/p5.js-func/) ã¨è¨€ã†ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã‚Œã°ï¼Œã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã®ã¿ãªã‚‰ãšæ§˜ã€…ãªã“ã¨ãŒã‚µã‚¯ãƒƒã¨è¡Œãˆã¾ã™ã®ã§ï¼Œå‚è€ƒã¾ã§ã«ã”ç´¹ä»‹ğŸ’

<img src="/assets/14/p5-func.png" alt="p5.func ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å…¬å¼ã‚µã‚¤ãƒˆ" class="mx-auto" />


---
layout: center
---

# lerp() ãƒ¡ã‚½ãƒƒãƒ‰

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# lerp() ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã¯ï¼Ÿ

<br />

2ã¤ã®æ•°å€¤ã®é–“ã®æ•°å€¤ã‚’ï¼Œç‰¹å®šã®å¢—åˆ†ã§è¨ˆç®—ã™ã‚‹é–¢æ•°ã§ã™ğŸ’


```js
/**
 * syntax
 *
 * @param {number} start - åœ°ç‚¹Aã®å€¤
 * @param {number} stop - åœ°ç‚¹Bã®å€¤
 * @param {number} amt - è£œå®Œã™ã‚‹å€¤ï¼0 - 1
 */
lerp(start, stop, amt)

// ä¾‹
const val = lerp(0, 100, 0.5)
console.log(val)  // 50
```

---

# lerpColor() ãƒ¡ã‚½ãƒƒãƒ‰

<br />

`lerp()` ã®åŸç†ã‚’ç”¨ã„ã¦ï¼Œ2è‰²ã‚’ãƒ–ãƒ¬ãƒ³ãƒ‰ã—ã¦ãã®é–“ã®ã©ã“ã‹ã«3è‰²ç›®ã‚’è¦‹ã¤ã‘ã‚‹é–¢æ•°ã§ã™ğŸ’


```js
/**
 * syntax
 *
 * @param {p5.Color} c1 - åœ°ç‚¹Aã®å€¤
 * @param {p5.Color} c2 - åœ°ç‚¹Bã®å€¤
 * @param {number} amt - è£œå®Œã™ã‚‹å€¤ï¼0 - 1
 */
lerpColor(c1, c2, amt)

// ä¾‹
let from = color(218, 165, 32);
let to = color(72, 61, 139);

const val = lerpColor(from, to, 0.5)
console.log(val)  // p5.Color ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
```

---

# å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã‚’å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ğŸ™‹

<br />

`lerp()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ãŸ [å…¬å¼ã®ã‚µãƒ³ãƒ—ãƒ«](https://p5js.org/examples/color-lerp-color.html) ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’
ã“ã‚“ãªæ„Ÿã˜ã®ä½œå“ã§ã™ï¼

<video src="/assets/14/lerp-sample.mp4" controls width="600" class="mt-8 mx-auto"></video>

---

# å››è¾ºå½¢ã‚’æãï¼šquad() ãƒ¡ã‚½ãƒƒãƒ‰

<br />

ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã¯å››è¾ºå½¢ã‚’æã `quad()` ãƒ¡ã‚½ãƒƒãƒ‰ãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ï¼<br />
ã“ã¡ã‚‰ã¯åå‰ã®é€šã‚Šå››è§’å½¢ãƒ»å››è¾ºå½¢ã‚’æç”»ã™ã‚‹é–¢æ•°ã«ãªã‚Šã¾ã™ğŸ’

```js
/**
 * syntax
 *
 * @param {number} x1 - ç‚¹1ã® x åº§æ¨™
 * @param {number} y1 - ç‚¹1ã® y åº§æ¨™
 * @param {number} x2 - ç‚¹2ã® x åº§æ¨™
 * @param {number} y2 - ç‚¹2ã® y åº§æ¨™
 * @param {number} x3 - ç‚¹3ã® x åº§æ¨™
 * @param {number} y3 - ç‚¹3ã® y åº§æ¨™
 * @param {number} x4 - ç‚¹4ã® x åº§æ¨™
 * @param {number} y4 - ç‚¹4ã® y åº§æ¨™
 */
quad((x1, y1, x2, y2, x3, y3, x4, y4, [detailX], [detailY])

```

â€»1ï¼šz è»¸ã®åº§æ¨™ã‚‚æŒ‡å®šã§ãã¾ã™ãŒï¼ŒWEBGL ãƒ¢ãƒ¼ãƒ‰ã®ã¨ãã®ã¿åˆ©ç”¨å¯<br />
â€»2ï¼š`detailX, detailY` ã¯ä½™ã‚Šä½¿ã†ã“ã¨ã¯ãªã•ãã†ã§ã™

---
layout: center
---


# ä½™ã£ãŸã®ã§ã“ã¡ã‚‰ã‚’æã„ãŸğŸ’

<img src="/assets/14/easing-demo2.png" class="mx-auto" width="800" />

---

# å®Ÿè£…

```js
// ã“ã“ã¯è‡ªç”±ã«å¤‰æ›´ã—ã¦ãã ã•ã„
const easeOutQuint = function (t) {
  return 1 + --t * t * t * t * t;
};

const moveLimit = 2500;
const dotCount = 65;
const dots = [];

function setup() {
  createCanvas(600, 600);
  colorMode(HSB);
  for (let i = 0; i < dotCount; i++) {
    dots.push(new Point());
  }
}
function draw() {
  blendMode(BLEND);
  background(240, 80, 8, 0.3);
  blendMode(SCREEN);
  for (let dot of dots) {
    dot.update();
    dot.show();
  };
}
```

---

# å®Ÿè£…ï¼ˆç¶šãï¼‰

```js
class Point {
  constructor() {
    this.x = width / 2;
    this.y = height / 2;
    this.distX = random(0, width);
    this.distY = random(0, height);
    this.preX = this.x;
    this.preY = this.y;
    this.startTime = Date.now();
    this.moveTime = 0;
    this.stopTime = 0;
    this.isMove = false;
    this.rad = random(5, 22);
    this.col = random(15, 195);
  }

  update() {/** TBD */}

  show() {
    fill(this.col, 60, 80, 1);
    noStroke();
    ellipse(this.x, this.y, this.rad);
  }
}
```

---

# å®Ÿè£…ï¼ˆç¶šãï¼‰

```js
  update() {
    if (this.isMove) {
      this.moveTime = (Date.now() - this.startTime) / moveLimit;
      this.x =
        this.preX + (this.distX - this.preX) * easeOutQuint(this.moveTime);
      this.y =
        this.preY + (this.distY - this.preY) * easeOutQuint(this.moveTime);
      if (Date.now() - this.startTime >= moveLimit) {
        this.isMove = false;
        this.stopTime = Date.now();
        this.preX = this.x;
        this.preY = this.y;
      }
    } else {
      if (Date.now() - this.stopTime > moveLimit) {
        this.isMove = true;
        this.startTime = Date.now();
        this.distX = random(0, width);
        this.distY = random(0, height);
      }
    }
  }
```


---
layout: center
---

# ã§ã¯ï¼Œæœ¬æ—¥ã®æˆæ¥­ã¸GO ğŸš€

---
layout: center
---

# p5.sound ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# p5.sound


> p5.sound extends p5 with [Web Audio](https://developer.mozilla.org/ja/docs/Web/API/Web_Audio_API) functionality including audio input, playback, analysis and synthesis.
>
> ï¼ˆå…¬å¼ã‚µã‚¤ãƒˆã‚ˆã‚ŠæŠœç²‹ï¼‰

<br />

ä¸Šè¨˜ã®é€šã‚Š `Web Audio API` ã‚’ãƒ©ãƒƒãƒ—ã—ãŸ `p5.js` ã®ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ï¼‘ã¤ã§ï¼Œæ§˜ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã—ã¾ã™ğŸ’è©³ã—ãã¯ [ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://p5js.org/reference/#/libraries/p5.sound) ã‚’ã”å‚ç…§ãã ã•ã„ï¼

<br />

è»½ã [Web Audio API(MDN)](https://developer.mozilla.org/ja/docs/Web/API/Web_Audio_API) ã«ã¤ã„ã¦ã‚‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ğŸ‘‰

---

# ç°¡å˜ã« `p5.sound` ã‚’ä½¿ã£ã¦ã¿ã‚‹

#### è©¦ã™ã«ã‚ãŸã£ã¦ï¼Œã¾ãšã¯éŸ³æºã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ä»Šå›ã¯ãŠãã‚‰ãçš†ã•ã‚“ã”å­˜çŸ¥ã® [é­”ç‹é­‚](https://maou.audio/) ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã® `BGM` ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã›ã¦ã„ãŸã ãã¾ã—ã‚‡ã†ğŸ’

<br />

<img src="/assets/15/mao.png" alt="é­”ç‹é­‚ã‚µã‚¤ãƒˆ" class="mx-auto border-1" />

---

# ã“ã“ã§ã„ã¤ã‚‚ã® editor ã‚’é–‹ãã¾ã™

#### æ‰‹ã‚’å‹•ã‹ã›ã‚‹æ–¹ã¯ä¸€ç·’ã«æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ğŸ™‹

<br />

<img src="/assets/12/editor-p5js.png" alt="editor p5.jsã®ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£" width="800" />

---

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

#### å…ˆç¨‹ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ğŸ’

<img src="/assets/15/upload-file.png" alt="ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰" class="mx-auto" />

---

# å®Ÿè£…

```js
let song;

function setup() {
  song = loadSound('bgm.mp3');

  // èª­ã¿è¾¼ã¾ã‚ŒãŸã‹ç¢ºèª
  console.log(song);

  createCanvas(720, 400);
  background(255, 0, 0);
}

function mousePressed() {
  if (song.isPlaying()) {
    song.stop();
    background(250, 100, 100);
  } else {
    song.play();
    // ãƒªãƒ”ãƒ¼ãƒˆå†ç”Ÿã•ã›ãŸã„å ´åˆ
    // song.loop();
    background(0, 255, 0);
  }
}
```

---

# éŸ³ã®éŸ³é‡ã«åˆã‚ã›ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```diff
  function setup() {
    ï¼ˆä¸­ç•¥ï¼‰
-   background(255, 0, 0);
+   analyzer = new p5.Amplitude();
+   analyzer.setInput(song);
+   noStroke();
+   fill(250, 100, 100);
  }

+ function draw() {
+   background(255);
+   let rms = analyzer.getLevel();
+   ellipse(width / 2, height / 2, 100 + rms * 200, 100 + rms * 200);
+ }

  function mousePressed() {
    if (song.isPlaying()) {
      song.stop();
-     background(250, 100, 100);
+     fill(250, 100, 100);
    } else {
      song.loop();
-     background(0, 255, 0);
+     fill(0, 255, 0);
    }
  }
```

---

# å‚è€ƒä½œå“

<img src="/assets/15/otani-san.png" alt="Otani ã•ã‚“ã®ä½œå“" class="mx-auto" width="640" />

Otani ã•ã‚“ã® [Long Seller](https://openprocessing.org/sketch/1667383) ã¨è¨€ã†ä½œå“ãŒã¨ã¦ã‚‚ã‚¯ãƒ¼ãƒ«ã§å‚è€ƒã«ãªã‚Šã¾ã™ğŸ’

â€»ã“ã®ä½œå“ã®æ›²ã‚‚ã”æœ¬äººãŒä½œæ›²ã•ã‚Œã¦ã„ã¾ã™â€¦ï¼

---
layout: center
---


# p5.polar ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# p5.polar ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã¯

<br />

> A programming challenges for learning how to draw geometric and abstract patterns with p5.Polar library. p5.Polar is a polar coordinate system for p5.js. The library converts a polar coordinate to cartesian, and abstracts the mathematics required for making many types of geometric patterns.
>
> [å…¬å¼ã‚µã‚¤ãƒˆ](https://liz-peng.github.io/p5.Polar/) ã‚ˆã‚ŠæŠœç²‹

<br />

å¹¾ä½•å­¦æ¨¡æ§˜ã‚„æŠ½è±¡çš„ãªæ¨¡æ§˜ã‚’æããŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ï¼Œå¹¾ä½•å­¦æ¨¡æ§˜ã®ä½œæˆã«å¿…è¦ãªæ•°å­¦ã‚’æŠ½è±¡åŒ–ã—ã¦ãã‚Œã¦ã„ã¾ã™ğŸ’

---

# ã“ã‚“ãªæ„Ÿã˜

<img src="/assets/15/polar-sample.png" alt="p5.polar ã®ä¾¿åˆ©ã•ã®èª¬æ˜" class="mx-auto my-4" width="720" />

ç”»åƒå¼•ç”¨: [README](https://github.com/liz-peng/p5.Polar)

---

# p5.polar ã‚µã‚¤ãƒˆ

<img src="/assets/15/p5-polar.png" class="mx-auto" alt="p5.polar ã‚µã‚¤ãƒˆ" />

---

# è©¦ã—ã«æã„ã¦ã¿ã‚ˆã†ğŸ™‹

#### [playground](https://liz-peng.github.io/p5.Polar/playground.html) ã¨ã‚µãƒ³ãƒ—ãƒ«ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ï¼Œè©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’

<div class="flex my-4">
  <img src="/assets/15/polar-sample-1.png" alt="polar å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ï¼‘" width="400" class="mx-auto" />
  <img src="/assets/15/polar-sample-2.png" alt="polar å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ï¼’" width="400" class="mx-auto" />
</div>

---

# ï¼‘æšç›®ã®å®Ÿè£…

```js
function setup() {
  background(220);
  setCenter(width/2, height/2);

  // polarLines( number, radius, distance, [callback] )
  stroke('#000')
  strokeWeight(0.3);
  polarLines(3, 200, 0);

  noStroke();

  // polarHexagon( angle, radius, [distance] )
  fill(175, 170, 238);
  polarHexagon(30, 50, 0);

  // polarEllipse( angle, widthRadius, heightRadius, [distance] )
  fill(252, 248, 200);
  polarEllipses(8, 10, 10, 100);
  fill(238, 175, 170);
  polarEllipses(12, 40, 40, 200);
  fill(252, 248, 200, 120);
  polarEllipses(5, 80, 80, 160);
}
```

---

# ï¼’æšç›®ã®å®Ÿè£…

```js
function setup() {
  background(220);
  setCenter(width/2, height/2);
  noFill();

  // polarEllipses( number, widthRadius, heightRadius, distance, [callback] )
  polarEllipses(50, 0, 0, 0, function(...args) {
    stroke(args[0]*10);
    fill(args[0]*5, args[0]*4, args[0]*3, 30);
      args[2] = args[0]*6;
      args[3] = args[0]*6;
      args[4] = args[0]*5;
      return args;
  });
}
```

---
layout: center
---

# c2.js ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# ãƒœãƒ­ãƒã‚¤å›³

> ãƒœãƒ­ãƒã‚¤å›³ï¼ˆãƒœãƒ­ãƒã‚¤ãšã€è‹±: Voronoi diagramï¼‰ã¯ã€ã‚ã‚‹è·é›¢ç©ºé–“ä¸Šã®ä»»æ„ã®ä½ç½®ã«é…ç½®ã•ã‚ŒãŸè¤‡æ•°å€‹ã®ç‚¹ï¼ˆæ¯ç‚¹ï¼‰ã«å¯¾ã—ã¦ã€åŒä¸€è·é›¢ç©ºé–“ä¸Šã®ä»–ã®ç‚¹ãŒã©ã®æ¯ç‚¹ã«è¿‘ã„ã‹ã«ã‚ˆã£ã¦é ˜åŸŸåˆ†ã‘ã•ã‚ŒãŸå›³ã®ã“ã¨ã§ã‚ã‚‹ã€‚ç‰¹ã«äºŒæ¬¡å…ƒãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰å¹³é¢ã®å ´åˆã€é ˜åŸŸã®å¢ƒç•Œç·šã¯ã€å„ã€…ã®æ¯ç‚¹ã®äºŒç­‰åˆ†ç·šã®ä¸€éƒ¨ã«ãªã‚‹ã€‚
> [wikipaeida](https://ja.wikipedia.org/wiki/ãƒœãƒ­ãƒã‚¤å›³) ã‚ˆã‚ŠæŠœç²‹

<img src="/assets/15/voronoi.png" alt="ãƒœãƒ­ãƒã‚¤å›³" class="mx-auto" width="480" />

ç”»åƒå¼•ç”¨: [ç¬¬11å› ãƒœãƒ­ãƒã‚¤å›³ã®ä½œæˆï¼ˆå‰ç·¨ï¼‰](https://gihyo.jp/dev/serial/01/geometry/0011)

---
layout: center
---

# ä»Šå›ã¯ã“ã®ãƒœãƒ­ãƒã‚¤å›³ã‚’åŠ å·¥ã—ãŸ<br>ã¨ã‚ã‚‹ä½œå“ã®å†™çµŒã‚’ã—ã¾ã—ã‚‡ã†ğŸ™‹

---

# ä»Šå›å†™çµŒã™ã‚‹ä½œå“

<img src="/assets/15/limited-voronoi.png" alt="ä½œå“ã‚­ãƒ£ãƒ—ãƒãƒ£" class="mx-auto" width="700" />

ç”»åƒå¼•ç”¨: [LimitedVoronoi2](https://c2js.org/examples.html?name=LimitedVoronoi2)

---

# c2.js ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæœ¬ä½“ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

#### CDN ç­‰ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ï¼Œ[GitHub ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/ren-yuan/c2.js/) ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ğŸ’

<img src="/assets/15/c2js-repo.png" alt="ãƒªãƒã‚¸ãƒˆãƒª" class="mx-auto my-2 border-1" width="700" />

ç”»åƒå¼•ç”¨: [ren-yuan/c2.js](https://github.com/ren-yuan/c2.js/blob/main/dist/c2.min.js)

---

# c2.min.js ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

<img src="/assets/15/c2-min-js.png" alt="" class="mx-auto my-2 border-1" width="700" />

---

# å®Ÿè£…

<br />

`index.html` ã‹ã‚‰å…ˆã»ã©ä½œæˆã—ãŸ `c2.min.js` ã‚’èª­ã¿è¾¼ã¿ã¾ã™ğŸ’

```diff
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js"></script>
+   <script src="c2.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
  </head>

  <body>
    <main>
+     <canvas id="c2"/>
    </main>
    <script src="sketch.js"></script>
  </body>
```

---

# å®Ÿè£…

#### ã„ã¤ã‚‚ã¨ã¯å°‘ã—é•ã£ãŸæº–å‚™ã«ãªã‚Šã¾ã™ğŸ’ä»¥ä¸‹ã§ã¾ã‚‹ã£ã¨ä¸Šæ›¸ãã—ã¦ãã ã•ã„ï¼

<br />

```js
const renderer = new c2.Renderer(document.getElementById("c2"));
resize();

renderer.background("#cccccc");

window.addEventListener("resize", resize);
function resize() {
  let parent = renderer.canvas.parentElement;
  renderer.size(parent.clientWidth, (parent.clientWidth / 16) * 9);
}
```

---

# å®Ÿè£…

#### ç¶šã„ã¦æç”»éƒ¨åˆ†ã‚’å…ˆã«å®Ÿè£…ã—ã¾ã™ğŸ’

```js
let agents = new Array(20);
for (let i = 0; i < agents.length; i++) {
  agents[i] = new Agent();
}

renderer.draw(() => {
  renderer.clear();

  let voronoi = new c2.LimitedVoronoi();
  voronoi.compute(agents);

  for (let i = 0; i < agents.length; i++) {
    agents[i].display();
    agents[i].update();
  }
});
```

---

# å®Ÿè£…

#### æœ¬ä½“ã®ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™ğŸ’

```js
let random = new c2.Random();

class Agent extends c2.Cell {
  constructor() {
    let x = random.next(renderer.width);
    let y = random.next(renderer.height);
    let r = random.next(renderer.width / 25, renderer.width / 5);
    // è¦ªã‚¯ãƒ©ã‚¹ã® constructor() ã®å®Ÿè¡Œ
    super(x, y, r);

    this.vx = random.next(-2, 2);
    this.vy = random.next(-2, 2);
    this.color = c2.Color.hsl(
      random.next(0, 30),
      random.next(30, 60),
      random.next(20, 100),
    );
  }

  update() {}

  display() {}
}
```

---

# å®Ÿè£…

```js
  display() {
    renderer.stroke("#333333");
    renderer.lineWidth(1);

    if (this.state == 0) {
      renderer.lineDash(false);
      renderer.fill(false);
    } else if (this.state == 1) {
      renderer.lineDash(false);
      renderer.fill(this.color);
    } else if (this.state == 2) {
      renderer.lineDash([5, 5]);
      renderer.fill(false);
    }
    renderer.cell(this);

    renderer.stroke("#333333");
    renderer.lineWidth(5);
    renderer.point(this.p.x, this.p.y);
  }
```

---

# å®Ÿè£…

```js
 update() {
    this.p.x += this.vx;
    this.p.y += this.vy;

    if (this.p.x < 0) {
      this.p.x = 0;
      this.vx *= -1;
    } else if (this.p.x > renderer.width) {
      this.p.x = renderer.width;
      this.vx *= -1;
    }
    if (this.p.y < 0) {
      this.p.y = 0;
      this.vy *= -1;
    } else if (this.p.y > renderer.height) {
      this.p.y = renderer.height;
      this.vy *= -1;
    }
  }
```

---
layout: center
---

# å®Œæˆ ğŸ‰

<style>
h1 {
  text-align: center;
  margin-bottom: 20px;
}
</style>

---
layout: center
---

# ä½™ã£ãŸã‚‰ä½•ã‹æã

---
layout: center
---

## æ¬¡å›ã¯ GLSL(OpenGL Shading Language) ã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†ğŸ™‹

<style>
h2 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
  text-align: center;
}
</style>
