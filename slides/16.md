---
theme: seriph
background: https://source.unsplash.com/collection/94734566/1920x1080
class: "text-center"
lineNumbers: false
info: |
  ## ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©è³‡æ–™#16
  VANTAN Techgord Academy
  Created by [@kuwahara_jsri](https://twitter.com/kuwahara_jsri)
fonts:
  sans: "Josefin Sans"
  serif: "Noto Sans JP"
  mono: "Fira Code"
drawings:
  persist: false
highlighter: prism-xonokai
title: ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©
css: unocss
---

# ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©

VANTAN Techford Academy

### #16 GLSL å…¥é–€â‘ 

<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

<div class="abs-br m-6 flex gap-2">
  <button @click="$slidev.nav.openInEditor()" title="Open in Editor" class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon:edit />
  </button>
  <a href="https://github.com/kkeeth/vantan-techford-p5js-slide" target="_blank" alt="GitHub"
    class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon-logo-github />
  </a>
</div>

---
layout: center
class: text-center
---

# å‡ºå¸­ ğŸ™‹

---
layout: center
---

# ä»Šæ—¥è©±ã™ã“ã¨ğŸ“‹

---

# â–¼ GLSL å…¥é–€â‘ 

<br />


## ğŸ‘‰ è»½ãå‰å›ã®å¾©ç¿’
<br />

## ğŸ‘‰ å‰å›è§£èª¬ã§ããªã‹ã£ãŸã‚³ãƒ¼ãƒ‰ã®è§£èª¬

<br />

## ğŸ‘‰ GLSLï¼Œã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã¨ã¯

<br />

## ğŸ‘‰ GLSL ã«è§¦ã‚Œã¦ã¿ã‚ˆã†

---
layout: center
---

# æˆæ¥­è³‡æ–™ğŸ“‹
<br />

[https://vantan-techford-p5js-slide.vercel.app/](https://vantan-techford-p5js-slide.vercel.app/)

<br />

<img width="600" class="mx-auto" src="/assets/1/text.png" alt="è¬›ç¾©è³‡æ–™" />

---
layout: center
---

# è»½ãå‰å›ã®å¾©ç¿’ğŸ“

---
layout: center
---

# p5.sound ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# p5.sound


> p5.sound extends p5 with [Web Audio](https://developer.mozilla.org/ja/docs/Web/API/Web_Audio_API) functionality including audio input, playback, analysis and synthesis.
>
> ï¼ˆå…¬å¼ã‚µã‚¤ãƒˆã‚ˆã‚ŠæŠœç²‹ï¼‰

<br />

ä¸Šè¨˜ã®é€šã‚Š `Web Audio API` ã‚’ãƒ©ãƒƒãƒ—ã—ãŸ `p5.js` ã®ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ï¼‘ã¤ã§ï¼Œæ§˜ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã—ã¾ã™ğŸ’è©³ã—ãã¯ [ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://p5js.org/reference/#/libraries/p5.sound) ã‚’ã”å‚ç…§ãã ã•ã„ï¼

<br />

ã“ã¡ã‚‰ã‚‚åˆã‚ã›ã¦ [Web Audio API(MDN)](https://developer.mozilla.org/ja/docs/Web/API/Web_Audio_API) ã”å‚ç…§ğŸ‘‰

---
layout: center
---


# p5.polar ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# p5.polar ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã¯

<br />

> A programming challenges for learning how to draw geometric and abstract patterns with p5.Polar library. p5.Polar is a polar coordinate system for p5.js. The library converts a polar coordinate to cartesian, and abstracts the mathematics required for making many types of geometric patterns.
>
> [å…¬å¼ã‚µã‚¤ãƒˆ](https://liz-peng.github.io/p5.Polar/) ã‚ˆã‚ŠæŠœç²‹

<br />

å¹¾ä½•å­¦æ¨¡æ§˜ã‚„æŠ½è±¡çš„ãªæ¨¡æ§˜ã‚’æããŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ï¼Œå¹¾ä½•å­¦æ¨¡æ§˜ã®ä½œæˆã«å¿…è¦ãªæ•°å­¦ã‚’æŠ½è±¡åŒ–ã—ã¦ãã‚Œã¦ã„ã¾ã™ğŸ’

---

# ã“ã‚“ãªæ„Ÿã˜

<img src="/assets/15/polar-sample.png" alt="p5.polar ã®ä¾¿åˆ©ã•ã®èª¬æ˜" class="mx-auto my-4" width="720" />

ç”»åƒå¼•ç”¨: [README](https://github.com/liz-peng/p5.Polar)

---

# p5.polar ã‚µã‚¤ãƒˆ

<img src="/assets/15/p5-polar.png" class="mx-auto" alt="p5.polar ã‚µã‚¤ãƒˆ" />

---

# è©¦ã—ã«æã„ã¦ã¿ãŸ

<div class="flex my-4">
  <img src="/assets/15/polar-sample-1.png" alt="polar å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ï¼‘" width="360" class="mx-auto" />
  <img src="/assets/15/polar-sample-2.png" alt="polar å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ï¼’" width="360" class="mx-auto" />
</div>

â€»ï¼’æšç›®ã¯ãƒã‚°ã£ã¦ã¾ã—ãŸâ€¦

---
layout: center
---

# c2.js ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# `c2.js` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã¯

> c2.js is a JavaScript library for creative coding based on computational geometry, physics simulation, evolutionary algorithm and other modules.
> [å…¬å¼ã‚µã‚¤ãƒˆ](https://c2js.org/index.html) ã‚ˆã‚ŠæŠœç²‹

<img src="/assets/15/voronoi-site.png" class="mx-auto" alt="c2.js å…¬å¼ã‚µã‚¤ãƒˆ" width="640" />

ç”»åƒå¼•ç”¨: [å…¬å¼ã‚µã‚¤ãƒˆ](https://c2js.org/index.html)

---
layout: center
---

# ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ï¼Œ<br>è©¦ã—ã«ãƒœãƒ­ãƒã‚¤å›³ã‚’æã„ã¦ã¿ãŸâ€¦ï¼ˆæœªå®ŒğŸ™‡ï¼‰

---

# ãƒœãƒ­ãƒã‚¤å›³

> ãƒœãƒ­ãƒã‚¤å›³ï¼ˆãƒœãƒ­ãƒã‚¤ãšã€è‹±: Voronoi diagramï¼‰ã¯ã€ã‚ã‚‹è·é›¢ç©ºé–“ä¸Šã®ä»»æ„ã®ä½ç½®ã«é…ç½®ã•ã‚ŒãŸè¤‡æ•°å€‹ã®ç‚¹ï¼ˆæ¯ç‚¹ï¼‰ã«å¯¾ã—ã¦ã€åŒä¸€è·é›¢ç©ºé–“ä¸Šã®ä»–ã®ç‚¹ãŒã©ã®æ¯ç‚¹ã«è¿‘ã„ã‹ã«ã‚ˆã£ã¦é ˜åŸŸåˆ†ã‘ã•ã‚ŒãŸå›³ã®ã“ã¨ã§ã‚ã‚‹ã€‚ç‰¹ã«äºŒæ¬¡å…ƒãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰å¹³é¢ã®å ´åˆã€é ˜åŸŸã®å¢ƒç•Œç·šã¯ã€å„ã€…ã®æ¯ç‚¹ã®äºŒç­‰åˆ†ç·šã®ä¸€éƒ¨ã«ãªã‚‹ã€‚
> [wikipaeida](https://ja.wikipedia.org/wiki/ãƒœãƒ­ãƒã‚¤å›³) ã‚ˆã‚ŠæŠœç²‹

<img src="/assets/15/voronoi.png" alt="ãƒœãƒ­ãƒã‚¤å›³" class="mx-auto" width="480" />

ç”»åƒå¼•ç”¨: [ç¬¬11å› ãƒœãƒ­ãƒã‚¤å›³ã®ä½œæˆï¼ˆå‰ç·¨ï¼‰](https://gihyo.jp/dev/serial/01/geometry/0011)

---

# å‰å›å†™çµŒã—ã‚ˆã†ã¨ã—ãŸä½œå“

<img src="/assets/15/limited-voronoi.png" alt="ä½œå“ã‚­ãƒ£ãƒ—ãƒãƒ£" class="mx-auto" width="700" />

ç”»åƒå¼•ç”¨: [LimitedVoronoi2](https://c2js.org/examples.html?name=LimitedVoronoi2)

---
layout: center
---

# å‰å›è§£èª¬ã§ããªã‹ã£ãŸã‚³ãƒ¼ãƒ‰ã®è§£èª¬

---
layout: center
---

# ã–ã£ã¨å‰å›ã‚„ã£ãŸã¨ã“ã‚ã¾ã§<br/>ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãªãŒã‚‰å¾©ç¿’

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
  text-align: center;
}
</style>

---

# ã“ã“ã§ã„ã¤ã‚‚ã® editor ã‚’é–‹ãã¾ã™

#### æ‰‹ã‚’å‹•ã‹ã›ã‚‹æ–¹ã¯ä¸€ç·’ã«æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ğŸ™‹

<br />

<img src="/assets/12/editor-p5js.png" alt="editor p5.jsã®ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£" width="800" />

---

# å‰å›ã®ãƒã‚°ğŸ™‡

<br />

å‰å›ã¯ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã« `agetns.push()` ã§æ›¸ã„ã¦ã„ã¾ã—ãŸãŒï¼Œã“ã‚ŒãŒãƒŸã‚¹ã§ã™ï¼ã“ã‚Œã ã¨ç„¡é™ã«é…åˆ—ãŒå¢—ãˆã¦ã„ã£ã¦ã—ã¾ã„ï¼ŒPC ã®ãƒ¡ãƒ¢ãƒªé™ç•Œã«ä¸€ç¬ã§ DOM ãŒå¢—ãˆã¦ã—ã¾ã„ã¾ã™â€¦

ã“ã“ã¯é…åˆ—ã®å€¤ã‚’æ´—æ›¿ã—ãŸã„ã®ã§ï¼Œä»¥ä¸‹ãŒæ­£ã—ã„ã§ã™ï¼

```diff
  let agents = new Array(20);
  for (let i = 0; i < agents.length; i++) {
-   agents.push(new Agent());
+   agents[i] = new Agent();
  }
```

---

# `display()` ã®å®Ÿè£…

```js
  display() {
    // è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ state ã‚’è¦‹ã¦ã„ã‚‹
    // ä»Šå›ã¯èª¬æ˜ã¯å‰²æ„›
    // èˆˆå‘³ã‚ã‚‹æ–¹ã¯æœ¬ä½“ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å¾¡è¦§ãã ã•ã„
    if (this.state != 2) {
      renderer.stroke("#333333");

      renderer.lineWidth(1);
      // ä»Šã¾ã§è¦‹ã¦ããŸå›³å½¢ã®æ ç·šã‚‚ç‚¹ç·šã«ã§ãã‚‹
      renderer.lineDash([5, 5]);
      renderer.fill(false);
      renderer.cell(this);

      renderer.lineDash(false);
      renderer.fill(this.color);
      // ã“ã“ã®æ•°å­—ã¯ã”è‡ªç”±ã«å¤‰æ›´ã—ã¦ãã ã•ã„
      renderer.polygon(this.polygon(4));

      renderer.lineWidth(5);
      renderer.point(this.p.x, this.p.y);
    }
  }
```

---

# ä½™è«‡ï¼š `drawingContext.setLineDash()`

<br />

ç‚¹ç·šã‚’æãã«ã¯ `drawingContext.setLineDash()` ã‚’åˆ©ç”¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¾ã™ğŸ’

```js
  // ç ´ç·š
  drawingContext.setLineDash([5, 5]);
  line(30, height * 0.2, width - 30, height * 0.2);

  // ä¸€ç‚¹é–ç·š
  drawingContext.setLineDash([10, 5, 2, 5]);
  line(30, height * 0.4, width - 30, height * 0.4);

  // å®Ÿç·š
  drawingContext.setLineDash([1,1]);
  line(30, height * 0.6, width - 30, height * 0.6);
```

å¾Œã¯ `strokeWeight()` ã‚„ `strokeCap(ROUND)` ãªã©ã‚’ç”¨ã„ã¦ã„ãã‚‰ã§ã‚‚ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™ï¼

---

# `update()` ã®å®Ÿè£…

```js
  update() {
    // è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ p ã‚’è¦‹ã¦ã„ã‚‹
    // point ã®ç•¥ã§è¦ã¯åº§æ¨™ã§ã™
    this.p.x += this.vx;
    this.p.y += this.vy;

    if (this.p.x < 0) {
      this.p.x = 0;
      this.vx *= -1;
    } else if (this.p.x > renderer.width) {
      this.p.x = renderer.width;
      this.vx *= -1;
    }
    if (this.p.y < 0) {
      this.p.y = 0;
      this.vy *= -1;
    } else if (this.p.y > renderer.height) {
      this.p.y = renderer.height;
      this.vy *= -1;
    }
  }
```

---
layout: center
---

# ã§ã¯ï¼Œæœ¬æ—¥ã®æˆæ¥­ã¸GO ğŸš€

---
layout: center
---

# ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ï¼ŒGLSL ã¨ã¯

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã¨ã¯

> 3æ¬¡å…ƒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã«ãŠã„ã¦ã€ã‚·ã‚§ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆé™°å½±å‡¦ç†ï¼‰ã‚’è¡Œã†ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã“ã¨ã€‚ã€Œshadeã€ã¨ã¯ã€Œæ¬¡ç¬¬ã«å¤‰åŒ–ã•ã›ã‚‹ã€ã€Œé™°å½±ãƒ»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã€ã¨ã„ã†æ„å‘³ã§ã€ã€Œshaderã€ã¯é ‚ç‚¹è‰²ã‚„ãƒ”ã‚¯ã‚»ãƒ«è‰²ãªã©ã‚’æ¬¡ã€…ã«å¤‰åŒ–ã•ã›ã‚‹ã‚‚ã®ï¼ˆã‚ˆã‚Šå…·ä½“çš„ã«ã€ç‹­ç¾©ã®æ„å‘³ã§è¨€ãˆã°é–¢æ•°ï¼‰ã‚’æ„å‘³ã™ã‚‹ã€‚
> [wikipedia](https://ja.wikipedia.org/wiki/%E3%82%B7%E3%82%A7%E3%83%BC%E3%83%80%E3%83%BC) ã‚ˆã‚Š

å¹³ãŸãè¨€ãˆã°æç”»ã«ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚’ä»˜ã‘ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã“ã¨ã§ã™ã­ï¼æ–‡å­—é€šã‚Šé™°å½±å‡¦ç†ãŒä¸»ã¨æ€ã£ã¦ã„ãŸã ã„ã¦è‰¯ã„ã¨æ€ã„ã¾ã™ï¼

---

# GLSL ã¨ã¯

> GLSL (OpenGL Shading Language) ã¯GLslangã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã€Cè¨€èªã®æ§‹æ–‡ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸé«˜ãƒ¬ãƒ™ãƒ«ã‚·ã‚§ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨€èªã§ã‚ã‚‹ã€‚ã“ã‚Œã¯ã‚¢ã‚»ãƒ³ãƒ–ãƒªè¨€èªã‚„ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã«ä¾å­˜ã—ãŸè¨€èªã‚’ä½¿ã‚ãªã„ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºè€…ãŒã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ç›´æ¥åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«OpenGL ARB (Architecture Review Board)ã§ç­–å®šã•ã‚ŒãŸã€‚
> [wikipedia](https://ja.wikipedia.org/wiki/GLSL) ã‚ˆã‚Š

ã“ã®ã‚ã¨è§¦ã‚Œã¾ã™ãŒï¼ŒGLSL ã§ã¯ä»¥ä¸‹ï¼’ã¤ã®ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼

* `é ‚ç‚¹ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼`
  * é ‚ç‚¹ã®ä½ç½®ã‚’è¨ˆç®—ã‚’è¡Œã†
  * ä½ç½®åº§æ¨™ã‚„æ³•ç·šãƒ™ã‚¯ãƒˆãƒ«ãªã©ã®é ‚ç‚¹ã®å±æ€§ã ã‘ã‚’å‚ç…§ãƒ»å¤‰æ›ã™ã‚‹è¨˜è¿°

* `ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼`
  * è‰²ã®æƒ…å ±ã®æç”»å‡¦ç†ã‚’è¡Œã†
  * ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã®è‰²ã®è¨ˆç®—ã‚’ã™ã‚‹è¨˜è¿°


---
layout: center
---

# ğŸš¨æ³¨æ„ğŸš¨

### å…ˆç¨‹è¦‹ãŸé€šã‚Šï¼ŒGLSL ã¯ C è¨€èªãƒ™ãƒ¼ã‚¹ã® JavaScript ã¨ã¯å…¨ãç•°ãªã‚‹è¨€èªã«ãªã‚Šã¾ã™ï¼ã—ãŸãŒã£ã¦æ–‡æ³•ã‚„æ›¸ãæ–¹ãŒå…¨ãç•°ãªã‚Šã¾ã™ã®ã§ï¼Œãã®ç‚¹ã”æ³¨æ„ãã ã•ã„ï¼

### ã¾ãŸï¼Œå§‹ã‚ã‹ã‚‰ç´°ã‹ã„ã¨ã“ã‚ã¾ã§ç†è§£ã›ãšï¼Œã¾ãšã¯ã‚ã‚‹ç¨‹åº¦æŠŠæ¡ã—ã¦æ›¸ã„ã¦ã„ãä¸­ã§èª¿ã¹ã¦ã„ãæ–¹ãŒç†è§£ã¯æ—©ã„ã¨æ€ã„ã¾ã™ï¼

<style>
  * {
    text-align: center;
  }
</style>

---

# ç‰©å‡„ã„å‚è€ƒã«ãªã‚‹ã‚µã‚¤ãƒˆ

#### ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’å‹‰å¼·ã™ã‚‹ãªã‚‰ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆãŒã¨ã¦ã‚‚å‹‰å¼·ã«ãªã‚Šã¾ã™ğŸ™‹

<img src="/assets/16/p5js-shader.png" alt="p5.js shader" class="mx-auto border-1" width="640" />

ã‚µã‚¤ãƒˆURL: [https://itp-xstory.github.io/p5js-shaders/](https://itp-xstory.github.io/p5js-shaders/)

---

# ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã«å…¥é–€

### ã¾ãšã¯ãƒ™ã‚¿ã«è‰²ã‚’ä»˜ã‘ã‚‹ã¨ã“ã‚ã‹ã‚‰æ›¸ã„ã¦ã„ãã¾ã—ã‚‡ã†ğŸ™‹

```js
function setup() {
  // WEBGL ã¯å¿…é ˆ
  createCanvas(windowWidth, windowHeight, WEBGL);
  noStroke();
  // å¯†åº¦ã‚’è¨­å®š
  pixelDensity(1);
}

// ä»Šå› draw() ã¯ä¸è¦ãªã®ã§å‰Šé™¤
```

---

# ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’è¨˜è¿°

#### ã¾ãšã¯ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

`shader.vert` ã¨ `shader.frag` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼

<img src="/assets/16/create-shader-files.png" alt="ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ" class="mx-auto" width="800" />

---

# é ‚ç‚¹ã‚·ã‚§ãƒ¼ãƒ€ `shader.vert` ã®å®Ÿè£…

```glsl
// ã“ã“ã¯ãŠã¾ã˜ãªã„ã¨æ€ã£ã¦ãã ã•ã„
// GL_ES ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãªã‚‰ãã®ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™
#ifdef GL_ES
precision highp float;
#endif

// attribute ä¿®é£¾å­ä»˜ã® vec3 å‹ã®å¤‰æ•°
// å„é ‚ç‚¹å€‹åˆ¥ã«åˆ¶å¾¡ã—ãŸã„æ™‚ã«åˆ©ç”¨
attribute vec3 aPosition;

// Cè¨€èªãªã‚‰ãŠãªã˜ã¿ã®mainé–¢æ•°
// ã‚·ã‚§ãƒ¼ãƒ€ã¯ã“ã®é–¢æ•°å†…ã«å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
void main() {
  // vec4 å‹ã®å¤‰æ•°
  vec4 positionVec4 = vec4(aPosition, 1.0);
  // è‰²ã‚“ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã¾ã™ãŒï¼Œä»Šå›ã¯ï¼’æ¬¡å…ƒã®çµµã‚’æãã®ã§
  positionVec4.xy = positionVec4.xy * 2.0 - 1.0;
  gl_Position = positionVec4;
}
```

---

# ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚·ã‚§ãƒ¼ãƒ€ `shader.frag` ã®å®Ÿè£…

```glsl
// ãŠã¾ã˜ãªã„
#ifdef GL_ES
precision highp float;
#endif

// uniform ä¿®é£¾å­ä»˜ã® vec2 å‹ã®å¤‰æ•°
// å…¨é ‚ç‚¹ã«ä¸€å¾‹ã«å‡¦ç†ã—ãŸã„æ™‚ã«åˆ©ç”¨
uniform vec2 u_resolution;

void main() {
  // vec2 å‹ã®å¤‰æ•°
  vec2 uv = gl_FragCoord.xy / u_resolution.xy;
  vec3 color = vec3(uv, 1.0);

  gl_FragColor = vec4(color, 1.0);
}
```

---

# p5.js ã¨æ¥ç¶š

### å…ˆã»ã©ä½œæˆã—ãŸã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ p5.js å´ã§èª­ã¿è¾¼ã¿æç”»ã™ã‚‹ğŸ’

```diff
+ let myShader;

+ function preload() {
+   myShader = loadShader(
+     "shader.vert",
+     "shader.frag"
+   )
+ }

  function setup() {
    ï¼ˆä¸­ç•¥ï¼‰

+   shader(myShader);
    // u_resolution ã®ç¯„å›²ã‚’ç”»é¢å…¨ä½“ã«è¨­å®š
+   myShader.setUniform('u_resolution', [width, height]);
+   quad(-1, -1, -1, 1, 1, 1, 1, -1);
    // ã“ã‚Œã§ã‚‚OK
+   // rect(0, 0, width, height);
+   resetShader();
  }
```

---

# ä½™è«‡ï¼šrgb ã§è‰²ã‚’åˆ¶å¾¡

#### ä»¥ä¸‹ã®ã‚ˆã†ã« rgb ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½

```diff
  void main() {

+  float r = gl_FragCoord.x / u_resolution.x;
+  float g = 0.0;
+  float b = gl_FragCoord.y / u_resolution.y;

-  vec2 uv = gl_FragCoord.xy / u_resolution.xy;
-  vec3 color = vec3(uv, 1.0);

+  vec2 c = gl_FragCoord.xy / u_resolution;
+  c = c * 2.0 - 1.0;
+  color = vec3(pow(1.0 - abs(c.y), 8.0) * 2.0);
+  color *= vec3(0.2, 0.5, 0.9) ;

-  gl_FragColor = vec4(color, 1.0);
+  gl_FragColor = vec4(r, g, b, 1.0);
}
```

---
layout: center
---

# æ®‹ã‚Šã®æ™‚é–“ã¯ï¼Œ`p5.js shader` ã‚µã‚¤ãƒˆã® Basic Examples ã‚’ã„ãã¤ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’

---
layout: center
---

## æ¬¡å›ã¯ Twitter ã® "#ã¤ã¶ã‚„ãGLSL" ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã®<br>ã‚³ãƒ¼ãƒ‰ã‚’å†™çµŒã—ã¦ã¿ã¾ã—ã‚‡ã†ğŸ™‹

<style>
h2 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
  text-align: center;
}
</style>
