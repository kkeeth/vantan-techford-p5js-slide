---
theme: seriph
background: https://source.unsplash.com/collection/94734566/1920x1080
class: "text-center"
lineNumbers: true
info: |
  ## ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©è³‡æ–™#7
  VANTAN Techgord Academy
  Created by [@kuwahara_jsri](https://twitter.com/kuwahara_jsri)
fonts:
  sans: "Josefin Sans"
  serif: "Noto Sans JP"
  mono: "Fira Code"
drawings:
  persist: false
highlighter: prism
title: ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©
css: unocss
---

# ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©

VANTAN Techford Academy

### #8 ã„ãã¤ã‹ã®ä½œå“ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°â‘ <br />å®Ÿéš›ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ä½œå“ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å­¦ã¶

<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

<div class="abs-br m-6 flex gap-2">
  <button @click="$slidev.nav.openInEditor()" title="Open in Editor" class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon:edit />
  </button>
  <a href="https://github.com/kkeeth/vantan-techford-p5js-slide" target="_blank" alt="GitHub"
    class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon-logo-github />
  </a>
</div>

---
layout: center
class: text-center
---

# å‡ºå¸­ ğŸ™‹

---
layout: center
---

# ä»Šæ—¥è©±ã™ã“ã¨ğŸ“‹


---

# â–¼ ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°â‘ 

<br />

## ğŸ‘‰ è»½ãå‰å›ã®å¾©ç¿’ï¼ˆåº§å­¦ï¼‰

- ä¸‰è§’é–¢æ•°ã®ãŠã•ã‚‰ã„
- æ¥µåº§æ¨™
- å††ã®æ–¹ç¨‹å¼

## ğŸ‘‰ è»½ãå‰å›ã®å¾©ç¿’ï¼ˆp5.jsï¼‰

- å††ã®æ–¹ç¨‹å¼/æ¥µåº§æ¨™
- å‰å›ä½œã£ãŸã‚‚ã®ã®ã‚³ãƒ¼ãƒ‰

## ğŸ‘‰ ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°/ã‚³ãƒ¼ãƒ‰è§£æ

---
layout: center
---

# æˆæ¥­è³‡æ–™ğŸ“‹
<br />

[https://vantan-techford-p5js-slide.vercel.app/](https://vantan-techford-p5js-slide.vercel.app/)

<br />

<img width="600" class="mx-auto" src="/assets/1/text.png" alt="è¬›ç¾©è³‡æ–™" />

---
layout: center
---

# ä»Šå›ã®å†…å®¹ã¯ã‹ãªã‚Šã‚¿ãƒ•ã§ã™ãŒï¼Œ<br />é ‘å¼µã£ã¦ã„ãã¾ã—ã‚‡ã†ğŸ’ªâ—

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# å‰å›ã®å¾©ç¿’ï¼ˆåº§å­¦ï¼‰ğŸ“

---

# ä¸‰è§’é–¢æ•°â‘¢

### å‰å›è§¦ã‚ŒãŸã‚‚ã®ã¯ä»¥ä¸‹ã§ã™ ğŸ’

- ä¸‰è§’é–¢æ•°ã®ãŠã•ã‚‰ã„
- æ¥µåº§æ¨™
- å††ã®æ–¹ç¨‹å¼

---

# ä¸‰è§’é–¢æ•°ã®å®šç¾©

<img src="/assets/7/tri-func-def.png" alt="" width="700" class="ml-10 mt-10" />

---

# ä¸‰è§’é–¢æ•°ã®åŸºæœ¬

<img src="/assets/7/tri-func1.png" alt="ä¸‰è§’é–¢æ•°ã‚’å††ã§å›³ç¤º" width="800" class="mx-auto" />

---

# ä¸‰è§’é–¢æ•°ã®æ­£è² 

#### ä¸‰è§’é–¢æ•°ã®å®šç¾©ã‹ã‚‰ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«å€¤ã®æ­£è² ãŒå¤‰ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ğŸ’

<img src="/assets/7/tri-plus-minus.png" alt="sin, cos ã®æ­£è² ã‚’å›³ç¤º" width="600" class="mx-auto mt-10" />

---

# ä¸‰è§’é–¢æ•°ã®æ€§è³ª

#### æ•´æ•° `n` ã‚’ç”¨ã„ã¦ï¼Œä»¥ä¸‹ã®ã“ã¨ãŒæˆã‚Šç«‹ã¡ã¾ã™ ğŸ’

ç«¯çš„ã«è¨€ã†ã¨ï¼Œå¤§ããªè§’åº¦ã‚’æŒ‡å®šã—ã¦ã‚‚ä¸€å‘¨ã™ã‚‹ï¼ˆ`+2Ï€`ï¼‰ã¨åŒã˜å€¤ï¼ˆ`Î¸`ï¼‰ã«ãªã‚‹äº‹ã‚’æ„å‘³ã—ã¾ã™ï¼

<img src="/assets/7/tri-angle.png" alt="sin, cos ã®æ­£è² ã‚’å›³ç¤º" width="400" class="mx-auto mt-10" />

---

# ä¸‰è§’é–¢æ•°ã®æ€§è³ª

<img src="/assets/6/sin-cos-wave.gif" alt="" width="600" class="mx-auto mt-10" />


---

# å††ã®æ–¹ç¨‹å¼

#### ãƒ”ã‚¿ã‚´ãƒ©ã‚¹ã®å®šç†ã‚’æ€ã„å‡ºã—ã¦ã¿ã‚ˆã†ğŸ’

<img src="/assets/7/circle-equation.png" alt="å††ã®æ–¹ç¨‹å¼" width="600" class="mx-auto mt-8" />

---

# æ¥µåº§æ¨™ï¼ˆ2Dï¼‰

#### åŠå¾„ `r` ã¨è§’åº¦ `Î¸` ã‚’ç”¨ã„ãŸåº§æ¨™ç³»ã‚’ __æ¥µåº§æ¨™ç³»__ ã¨è¨€ã„ã¾ã™ğŸ’<br />ï¼ˆè¦‹ãŸç›®ã¯å††ã®æ–¹ç¨‹å¼ã¨åŒã˜ã§ã™ãŒâ€¦wï¼‰

<img src="/assets/7/poler-coordinates.png" alt="ï¼’æ¬¡å…ƒã®æ¥µåº§æ¨™ã®å›³ç¤º" width="750" class="mx-auto" />

---

# æ¥µåº§æ¨™ï¼ˆ3Dï¼‰

#### åŠå¾„ `r` ã¨ï¼’ã¤ã®è§’åº¦ `Î¸, Ï†` ã‚’ç”¨ã„ãŸæ¥µåº§æ¨™ç³»ã§ã™ï¼

<img src="/assets/7/3d-coor.png" alt="ï¼“æ¬¡å…ƒã®æ¥µåº§æ¨™ã®å›³ç¤º" width="650" class="mx-auto" />

Image by: [wikipedia](https://ja.wikipedia.org/wiki/æ¥µåº§æ¨™ç³»)

---
layout: center
---

# å‰å›ã®å¾©ç¿’ï¼ˆp5.jsï¼‰ğŸ“

---

# å††ã®æ–¹ç¨‹å¼/æ¥µåº§æ¨™

#### å‰å›ã®å¾©ç¿’ã§ã‚‚ã‚ã‚Šã¾ã™ãŒï¼Œæ¥µåº§æ¨™ã‚’ç”¨ã„ã¦å††ã‚’æã„ã¦ã¿ã¾ã—ã‚‡ã† ğŸ’

```js
let x;
let y;
// åŠå¾„
let r = 100;
// å††ã®ç›´å¾„
let d = 20;

function setup() {
  createCanvas(w = 600, h = w);
}

function draw() {
  background(20);
  translate(w / 2, h / 2);

  // å¼§åº¦æ³•ã§è¡¨ç¾
  for (let i = 0, j = 0; i < TAU; i += 0.3, j++) {
    x = r * cos(i);
    y = r * sin(i);
    ellipse(x, y, d, d)
  }
}
```

---

# å††ã®æ–¹ç¨‹å¼/æ¥µåº§æ¨™

#### ã“ã®ã¾ã¾ã ã¨å›ºå®šã—ãŸã¾ã¾ãªã®ã§å‹•ã‹ã—ã¾ã—ã‚‡ã† ğŸ’

```js
let xoff = 0.0

function draw() {
  background(20);
  translate(w / 2, h / 2);

  for (let i = 0; i < TAU; i += 0.3) {
    // è§’åº¦ã«åŠ ç®—ã™ã‚‹
    x = r * cos(i + xoff);
    y = r * sin(i + xoff);
    ellipse(x, y, d, d)
  }
  // ã“ã®å€¤ãŒå¤§ãã„ã»ã©é€Ÿãå›ã‚Šã¾ã™
  xoff += 0.03;
}
```

---

# å††ã®æ–¹ç¨‹å¼/æ¥µåº§æ¨™

#### ã•ã‚‰ã«ï¼Œä»Šã¯å††ã ã‘ãªã®ã§æ­£æ–¹å½¢ã¨å††ã‚’äº¤äº’ã«è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’

```js
function setup() {
  createCanvas(w = 600, h = w);
  // æ­£æ–¹å½¢ã®è»¸ã‚’ä¸­å¿ƒ
  rectMode(CENTER);
}

function draw() {
  background(20);
  translate(w / 2, h / 2);

  // åˆ¤å®šç”¨ã®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆå¤‰æ•° j ã‚’è¿½åŠ 
  for (let i = 0, j = 0; i < TAU; i += 0.3, j++) {
    x = r * cos(i + xoff);
    y = r * sin(i + xoff);

    // å¶æ•°ç•ªç›®ã‚’å††ã«ï¼Œå¥‡æ•°ç•ªç›®ã‚’æ­£æ–¹å½¢ã«
    j % 2 === 0
      ? ellipse(x, y, d, d)
      : rect(x, y, d + 7, d + 7);
  }
  xoff += 0.03;
}
```

---

# ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«è‰²ã€…è©¦ã—ã¦ã¿ã‚‹

#### ä¸‰è§’é–¢æ•°ã¯ã¡ã‚‡ã£ã¨å€¤ã‚’å¤‰ãˆã‚‹ã ã‘ã§è‰²ã€…å¤‰ã‚ã‚‹ã®ã§é¢ç™½ã„ã§ã™ğŸ’

```js
  for (let i = 0, j = 0; i < TAU; i += 0.3, j++) {
    // å††ã®åŠå¾„ãŒå¤§å°å‹•ã
    translate(30 * cos(i), 30 * sin(i))
    // æ¥•å††ãŒã‚°ãƒ«ã‚°ãƒ«å‹•ã
    translate(30 * sin(i), 30 * sin(i))
    translate(30 * cos(i), 30 * cos(i))
    // ã‚°ãƒ‹ãƒ£ã‚°ãƒ‹ãƒ£ã—ãŸå††é‹å‹•
    translate(30 * cos(i + xoff), 30 * sin(i * 5 + xoff))
    // å††è‡ªä½“ãŒå††é‹å‹•ã™ã‚‹
    translate(30 * cos(i + xoff), 30 * sin(i + xoff))

    x = r * cos(i + xoff);
    y = r * sin(i + xoff);

```

---
layout: center
---

# å‰å›ä½œã£ãŸã‚‚ã®


---

# å‰å›ä½œã£ãŸã‚‚ã®

<video src="/assets/7/create1.mp4" controls width="450" class="mx-auto"></video>

---

# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```js
const centerR = 80;
const arroundR = 30;
const outerR = 15;
const r1 = 100;
const r2 = 220;
const step = 45;

function setup() {
  createCanvas(windowWidth, windowHeight, WEBGL);
  noStroke();
  colorMode(HSB, 360);
}

ï¼ˆç¶šãï¼‰
```

---

# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```js
ï¼ˆç¶šãï¼‰

function draw() {
  background(0, 0, 360);
  fill(180, 100, 330);
  circle(0, 0, centerR);

  for (let i = 0; i < 360; i += step) {
    let dx = r1 * cos(-radians(i * 2) + millis() / 5);
    let dy = r1 * sin(-radians(i * 3) + millis() / 5);
    push();
    fill(i, 180, 360);
    circle(dx, dy, arroundR);
    pop();

    push();
    let outerCircleRange = map(cos(frameCount / 12), -1, 1, 3 / 4, 3 / 2);
    dx = r2 * outerCircleRange * cos(radians(i) + frameCount / 50);
    dy = r2 * outerCircleRange * sin(radians(i) + frameCount / 50);
    fill(i, 180, 330);
    circle(dx, dy, outerR);
    pop();
  }
}
```

---

# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
#### ã¡ãªã¿ã«ï¼Œä»¥ä¸‹ã®æ§˜ã«å¤‰æ›´ã™ã‚‹ã¨ãã‚Œã‚‚è¦‹ãŸç›®ã¨ã—ã¦ã¯é¢ç™½ã„ã§ã™ğŸ’

```diff
- background(0, 0, 360);
+ // background(0, 0, 360);

ï¼ˆä¸­ç•¥ï¼‰

    // å‰²ã‚‹æ•°ã‚’è‰²ã€…å¤‰æ›´ã™ã‚‹
-   let outerCircleRange = map(cos(frameCount / 12), -1, 1, 3 / 4, 3 / 2);
+   let outerCircleRange = map(cos(frameCount / 9), -1, 1, 3 / 4, 3 / 2);
+   let outerCircleRange = map(cos(frameCount / 32), -1, 1, 3 / 4, 3 / 2);

```

---
layout: center
---

# ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°/ã‚³ãƒ¼ãƒ‰è§£æ

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# ä»Šå›è§£æã™ã‚‹ã‚³ãƒ¼ãƒ‰

---

<div>

```html
<Tweet id="1588062547315679232" />
```

<Tweet id="1588062547315679232" scale="0.5" class="ml-80" />

</div>

---

# ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã«å¤‰æ› ğŸ’

```js
$ = [];
draw = (_) => {
  $[0] ?? createCanvas(540, 540);
  background(0, 9);
  $ = $.map(
    (v, i) =>
      stroke(i, i / 3, i / 5).point(v.copy().add(2, 1.6).mult(135)) +
      v.add(
        sin(v.y * (r = ((v.x * 2 + 2.5) ^ (v.y + 2)) * 8)) / 90,
        cos(v.x * r) / 90,
      ),
  )[2e3]
    ? $.slice(-1980)
    : [...$, ...[...Array(20)].map(p5.Vector.random3D)];
};
```

ã“ã‚Œã§ã‚‚è‰¯ã„ã§ã™ãŒï¼Œã‚‚ã†å°‘ã—è¦‹ã‚„ã™ã„ã‚ˆã†æ„šç›´ã«æ›¸ãç›´ã—ã¦ã¿ã¾ã™ ğŸ™‹

---

# æ•´å½¢å¾Œã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```js
let $ = [];
// 2000 ã®çœç•¥ã—ãŸæ›¸ãæ–¹
// 2 * 10^3 ã¨åŒã˜
const num = 2e3;

function setup() {
  createCanvas(600, 600);
}

ï¼ˆç¶šãï¼‰
```

---

# æ•´å½¢å¾Œã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```js
ï¼ˆç¶šãï¼‰

function draw() {
  background(0, 9);

  const arr = $.map((v, i) => {
    stroke(i, i / 3, i / 5);
    point(v.copy().add(2, 1.6).mult(135));
    r = ((v.x * 2 + 2.5) ^ (v.y + 2)) * 8;

    return v.add(sin(v.y * r) / 90, cos(v.x * r) / 90);
  });

  if (arr[num]) {
    $ = $.slice(-(num - 20));
  } else {
    let newArr = [];

    for (let i = 0; i < 20; i++) {
      newArr.push(p5.Vector.random3D());
    }
    $ = [...$, ...newArr];
  }
}
```

---
layout: center
---

# å…ã«ã‚‚è§’ã«ã‚‚ã¾ãšã¯èª­ã‚“ã§<br />ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹ç†è§£ã™ã‚‹ ğŸ’

---

# `draw()` ã®ä¸­èº«

#### ã¾ãšã¯ä»¥ä¸‹ã®éƒ¨åˆ†ã‹ã‚‰ ğŸ’ â€» `setup()` ã®æ–¹ã¯ç‰¹ã«è§£èª¬ãªã—ã§ã™

```js
// 2000
const num = 2e3;

ï¼ˆä¸­ç•¥ï¼‰

  // é…åˆ—ã® 2000 ç•ªç›®ã®å€¤ãŒ truthy
  // ã¤ã¾ã‚Šï¼Œé…åˆ—ã®è¦ç´ æ•°ãŒ 2000 ä»¥ä¸Šã«ãªã£ãŸå ´åˆ
  if (arr[num]) {
    // é…åˆ—ã®è¦ç´ ã‚’å…ˆé ­ã‹ã‚‰ 20 å€‹å‰Šé™¤ã—ï¼Œå¸¸ã«é…åˆ—ã®è¦ç´ æ•°ã‚’ 1980 ã«ç¶­æŒ
    $ = $.slice(-(num - 20));
  } else {
    // ä¸€æ™‚çš„ãªã‚‚ã®
    let newArr = [];

    // é…åˆ—ã®è¦ç´ æ•°ãŒ 2000 ã«æº€ãŸãªã„å ´åˆï¼Œæ–°ã—ã 20 å€‹ã®è¦ç´ ã‚’ç”Ÿæˆã—è¿½åŠ 
    for (let i = 0; i < 20; i++) {
      // random3D() ã¯ä¸‰æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã€€â€»å¾Œè¿°
      newArr.push(p5.Vector.random3D());
    }
    $ = [...$, ...newArr];
  }
```

---

# `p5.Vector.random3D` ãƒ¡ã‚½ãƒƒãƒ‰

#### ã¾ãšã¯[ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©](https://github.com/processing/p5.js/blob/v1.5.0/src/math/p5.Vector.js#L2033) ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã† ğŸ’

```js
/**
 * Make a new random 3D unit vector.
 *ï¼ˆä¸­ç•¥ï¼‰
 * @return {p5.Vector} A new <a href="#/p5.Vector">p5.Vector</a> object
 */
p5.Vector.random3D = function random3D() {
  // 0ã€œ2Ï€ ã®ä¸­ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ãªå€¤ï¼ˆè§’åº¦ï¼‰ã‚’å–å¾—
  const angle = Math.random() * constants.TWO_PI;
  // 0ã€œ1 ã®ä¸­ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ãªå€¤ã‚’å–å¾—
  const vz = Math.random() * 2 - 1;
  // å††ã®æ–¹ç¨‹å¼ã®å½¢ã‚’å¤‰ãˆãŸã‚‚ã®
  // vzBase^2 + vz^2 = 1 ã¨ã„ã†å††ã‚’è€ƒãˆã‚‹
  // vzBase ã¯å¿…ãšæ­£ã®å€¤ã«ãªã‚‹
  const vzBase = Math.sqrt(1 - vz * vz);
  // æ¥µåº§æ¨™
  const vx = vzBase * Math.cos(angle);
  const vy = vzBase * Math.sin(angle);
  // ãƒ™ã‚¯ãƒˆãƒ«ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆ
  return new p5.Vector(vx, vy, vz);
};
```

---

# `p5.Vector.random2D` ãƒ¡ã‚½ãƒƒãƒ‰

#### ä»Šå›ã¯ 2D ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã®ã§ `p5.Vector.random2D` ãƒ¡ã‚½ãƒƒãƒ‰ã§è‰¯ã„ã®ã§ã¯ï¼Ÿ

ã¨ã„ã†ã‚ã‘ã§ [ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©](https://github.com/processing/p5.js/blob/v1.5.0/src/math/p5.Vector.js#L1980) ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’


```js
/**
 * Make a new 2D unit vector from a random angle.
 * ï¼ˆä¸­ç•¥ï¼‰
 * @return {p5.Vector} A new <a href="#/p5.Vector">p5.Vector</a> object
 */
p5.Vector.random2D = function random2D() {
  return this.fromAngle(Math.random() * constants.TWO_PI);
};
```

ä¾å­˜ã—ã¦ã„ã‚‹ `fromAngle` ãƒ¡ã‚½ãƒƒãƒ‰ã«ï¼Œãƒ©ãƒ³ãƒ€ãƒ ãªå€¤ï¼ˆè§’åº¦ï¼‰ã‚’å¼•æ•°ã«æ¸¡ã—ã¦ã‚³ãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã ã‘ã®ã‚ˆã†ã§ã™ã®ã§ï¼Œãã¡ã‚‰ã‚‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼

---

# `fromAngle` ãƒ¡ã‚½ãƒƒãƒ‰

<br />

æ—©é€Ÿ [`fromAngle()` ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©](https://github.com/processing/p5.js/blob/00821f33ca1d8a6990364568f0374c4aaf713faa/src/math/p5.Vector.js#L1924) ã‹ã‚‰ï¼

```js
/**
 * Make a new 2D vector from an angle.
 * ï¼ˆä¸­ç•¥ï¼‰
 * @param {Number}     angle The desired angle, in radians (unaffected by <a href="#/p5/angleMode">angleMode</a>)
 * @param {Number}     [length] The length of the new vector (defaults to 1)
 * @return {p5.Vector}       The new <a href="#/p5.Vector">p5.Vector</a> object
 */
p5.Vector.fromAngle = function fromAngle(angle, length) {
  if (typeof length === 'undefined') {
    length = 1;
  }
  // ã‚ã‹ã‚Šã‚„ã™ãæ¥µåº§æ¨™ã§ï¼Œz è»¸ã®å€¤ã¯ 0 å›ºå®š
  // length ã¯ä»Šå›ã¯ 1 å›ºå®š
  return new p5.Vector(length * Math.cos(angle), length * Math.sin(angle), 0);
};
```

---
layout: center
---

# ã©ã®ã‚ˆã†ãªãƒ—ãƒ­ãƒƒãƒˆã«ãªã‚‹ã®ã‹ã‚‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ğŸ™‹

---

# ãƒ—ãƒ­ãƒƒãƒˆç”¨ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```js
function setup() {
  createCanvas(windowWidth, windowHeight);
}

function draw() {
  background(0, 9);
  translate(width / 2, height / 2);

  for (let i = 0; i < 20; i++) {
    let v = p5.Vector.random3D();
    let v = p5.Vector.random2D();

    stroke(255);
    strokeWeight(3);
    point(v.mult(200));
  }
}
```

ãƒ—ãƒ­ãƒƒãƒˆã‚‚è¦‹ã¦ã¿ã¦ãã ã•ã„ ğŸ’

---
layout: two-cols
---

# `random3D()`

<img src="/assets/8/random3d.png" width="350" alt="" />

::right::

# `random2D()`

<img src="/assets/8/random2d.png" width="350" alt="" />

---

# è©±ã‚’æˆ»ã™ã¨
#### ä»¥ä¸‹ã¯ `else` å†…ã§å††ã‚’æãã‚ˆã†ãªä¸‰æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«ã‚’é…åˆ—ã«è¿½åŠ ã—ï¼Œ `if` å†…ã§å¤ã„ã‚‚ã®ã‚’å‰Šé™¤ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ ğŸ’

<br />

```js

  if (arr[num]) {
    // é…åˆ—ã®è¦ç´ ã‚’å…ˆé ­ã‹ã‚‰ 20 å€‹å‰Šé™¤ã—ï¼Œå¸¸ã«é…åˆ—ã®è¦ç´ æ•°ã‚’ 1980 ã«ç¶­æŒ
    $ = $.slice(-(num - 20));
  } else {
    // ä¸€æ™‚çš„ãªé…åˆ—
    let newArr = [];

    // é…åˆ—ã®è¦ç´ æ•°ãŒ 2000 ã«æº€ãŸãªã„å ´åˆï¼Œæ–°ã—ã 20 å€‹ã®è¦ç´ ã‚’ç”Ÿæˆã—è¿½åŠ 
    for (let i = 0; i < 20; i++) {
      // ã“ã“ã§ç”Ÿæˆã—ä¸€æ™‚ä¿å­˜
      newArr.push(p5.Vector.random3D());
    }
    // ã“ã“ã§è¿½åŠ ã—ã¦ã„ã‚‹
    $ = [...$, ...newArr];
  }
```

---

# `draw()` ã®ä¸­èº«
#### ç¶šã„ã¦ä»¥ä¸‹ã®éƒ¨åˆ†ğŸ’

ã¨ã¦ã‚‚çŸ­ã„ã‚³ãƒ¼ãƒ‰ã§ã™ãŒï¼Œé¢ç™½ã„å·¥å¤«ãŒã“ã•ã‚Œã¦ã„ã¾ã™ï¼

```js
  // ç‚¹ã®é…åˆ—ã‚’ãƒ™ãƒ¼ã‚¹ã«ãƒ«ãƒ¼ãƒ—ã§å‡¦ç†ã—ï¼Œæ–°ãŸãªï¼ˆå€¤ã‚’æ›´æ–°å¾Œã®ï¼‰é…åˆ—ã§ä¸Šæ›¸ã
  const arr = $.map((v, i) => {
    // å˜ã«è‰²ä»˜ã‘
    stroke(i, i / 3, i / 5);
    // ç‚¹ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ï¼‰ã‚’ã‚³ãƒ”ãƒ¼ã—å…ƒã®ãƒ™ã‚¯ãƒˆãƒ«ã®å€¤ã‚’å¤‰ãˆãªã„ã‚ˆã†ã«
    // .add() ã¨ .mult() ã¯å˜ã«æç”»ä½ç½®ã‚’èª¿æ•´
    point(v.copy().add(2, 1.6).mult(135));
    // ã“ã“ãŒé–¢é–€ã§ï¼Œãƒ“ãƒƒãƒˆæ¼”ç®—ã‚’ã—ã¦ã„ã‚‹
    // â€» ^ ã¯ç´¯ä¹—è¨ˆç®—ã§ã¯ãªã„ã§ã™
    r = ((v.x * 2 + 2.5) ^ (v.y + 2)) * 8;

    // ã“ã“ã§ãƒ™ã‚¯ãƒˆãƒ«ã®å€¤ã‚’æ›´æ–°
    return v.add(sin(v.y * r) / 90, cos(v.x * r) / 90);
  });
```

---

#### ã¾ãšã¯è‰²ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ãƒ—ãƒ­ãƒƒãƒˆç”¨ã®ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ ğŸ™‹

```diff
function draw() {
  ï¼ˆä¸­ç•¥ï¼‰
+ const arr = $.map((v, i) => {
+   stroke(i, i / 3, i / 5);
+   point(v.copy().mult(200));
+   return v;
+ });
- for (let i = 0; i < 20; i++) {
-   let v = p5.Vector.random3D();
-   let v = p5.Vector.random2D();

-   stroke(255);
-   strokeWeight(3);
-   point(v.mult(200));
+ if (arr[num]) {
+   $ = $.slice(-(num - 20));
+ } else {
+   let newArr = [];
+   for (let i = 0; i < 20; i++) {
+     newArr.push(p5.Vector.random3D());
+   }
+   $ = [...$, ...newArr];
  }
}
```

---

# ã‚³ãƒ¼ãƒ‰è§£èª¬

#### å…ƒã®ã‚³ãƒ¼ãƒ‰ã¨ã®æ¯”è¼ƒã¯ä»¥ä¸‹ã§ã™ ğŸ’


```diff
  const arr = $.map((v, i) => {
    stroke(i, i / 3, i / 5);
-   point(v.copy().add(2, 1.6).mult(135));
+   point(v.copy().mult(200));
-   r = ((v.x * 2 + 2.5) ^ (v.y + 2)) * 8;

-   return v.add(sin(v.y * r) / 90, cos(v.x * r) / 90);
+   return v;
  });
```

<br />

* `G, B` ã®è¦ç´ ã‚’å°‘ãªãã™ã‚‹ã“ã¨ã§ï¼Œæš–è‰²ã®è‰²åˆã„ã«
* å…ƒã®ãƒ™ã‚¯ãƒˆãƒ«ã®å€¤ã‚’å¤‰æ›´ã—ãªã„ã‚ˆã†ã«ä¸€æ™‚çš„ãªã‚³ãƒ”ãƒ¼ã‚’å–å¾—ã—ï¼Œãã®ã‚³ãƒ”ãƒ¼ã‚’ãƒ™ãƒ¼ã‚¹ã«æç”»
* æœ¬ä½“ã§ã¯ãƒ™ã‚¯ãƒˆãƒ«è¨ˆç®—ã§ä½ç½®èª¿æ•´ï¼Œä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§ã¯ä¸€æ—¦ `translate(width / 2, height / 2);` ã§ä½ç½®èª¿æ•´
* `return` ã§ã¯ä¸€æ—¦ãƒ™ã‚¯ãƒˆãƒ«ã‚’ãã®ã¾ã¾è¿”ã™ã“ã¨ã§å¤‰ã‚ã‚‰ãšå††ã‚’æç”»

---
layout: image-right
image: "assets/8/color-demo.png"
---

# è¡¨ç¤ºä¾‹

<br />

### å„ç‚¹ãŒã¡ã‚‰ã¡ã‚‰ã¨ï¼Œ<br><br>ç™½â†’é»„â†’æ©™â†’èµ¤<br><br>ã¨å¤‰ã‚ã£ã¦æ¶ˆãˆã¦ã„ãæ§˜å­ãŒä¼ºãˆã‚‹ã¨æ€ã„ã¾ã™ğŸ’

---

# ã‚³ãƒ¼ãƒ‰è§£èª¬

#### ç¶šã„ã¦ä»¥ä¸‹ã® `return` ã®éƒ¨åˆ†

<br />

```js
function draw() {
  background(0, 9);
  translate(width / 2, height / 2);
  // ã‚ãˆã¦ç·šã‚’å…¥ã‚Œã¦ã„ã¾ã™
  line(0, -height, 0, height);
  line(-width, 0, width, 0);

  ï¼ˆä¸­ç•¥ï¼‰

  // â€» `r` ã¯ä¸€æ—¦ 1 ã«å›ºå®šã—ã¾ã™
  r = 1;

  return v.add(sin(v.y * r) / 90, cos(v.x * r) / 90);
```

ã‚ã‚‹æ„å‘³ã§ã“ã“ãŒæœ¬ã‚³ãƒ¼ãƒ‰å…¨ä½“ã®è‚ã¨ã„ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ğŸ™‹
çŸ­ã„ã‚³ãƒ¼ãƒ‰ã§ã™ãŒï¼Œè‰²ã€…åˆ†æã—ã¦ã¿ã‚‹ã¨è¦‹ãˆã¦ãã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ï¼

---

# ã‚³ãƒ¼ãƒ‰è§£èª¬

#### ã¡ã‚‡ã£ã¨ã‚³ãƒ¼ãƒ‰ã‚’æ•°å¼ã«æ›¸ãæ›ãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼

<img src="/assets/8/add-vector.png" alt="ã‚³ãƒ¼ãƒ‰ã‚’æ•°å¼åŒ–" width="500" class="mx-auto mt-10" />

* `x, y` å…±ã«åˆæœŸå€¤ã‚’æŒã£ãŸæ¥µåº§æ¨™
  * ã¡ãªã¿ã« `sin, cos` ã®å¼•æ•°ã‚‚æ¥µåº§æ¨™
* ã¤ã¾ã‚Šï¼Œ __èµ·å‹•ã¨ã—ã¦ã¯å††ã‚’æã__

---

# ãªãœå››è§’ãè¡¨ç¤ºã•ã‚Œã‚‹ã®ã‹ï¼Ÿ

#### A. å€¤ã‚’åŠ ç®—ã—ã¦ã„ã‚‹ãŒï¼Œ`sin, cos` ã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ï¼Œã„ãšã‚Œèª¤å·®ã®ç¯„å›²ã§ã—ã‹å¢—ãˆãªã„ã‹ã‚‰

<br />

ã¾ãŸï¼Œãã‚Œãã‚Œã®åº§æ¨™ã«ã¤ã„ã¦

* xåº§æ¨™ï¼šyåº§æ¨™ã®å¤‰åŒ–é‡ã«ä¾å­˜ã™ã‚‹
* yåº§æ¨™ï¼šxåº§æ¨™ã®å¤‰åŒ–é‡ã«ä¾å­˜ã™ã‚‹

ã¨ã„ã†ä¾å­˜é–¢ä¿‚ã®ãŸã‚ï¼Œçµæœå››è§’ããƒ—ãƒ­ãƒƒãƒˆã•ã‚Œã¾ã™ï¼

---

# ã‚³ãƒ¼ãƒ‰è§£èª¬

#### ã¡ãªã¿ã«ï¼Œã“ã®åŠå¾„ `r` ã®å€¤ã‚’è‰²ã€…å¤‰ãˆã¦ã¿ã‚‹ã¨é¢ç™½ã„ã§ã™ï¼ˆä»¥ä¸‹ã¯ `r = 8` ã®ä¾‹ï¼‰

<img src="/assets/8/n8-draw.png" alt="r=8ã®ãƒ—ãƒ­ãƒƒãƒˆ" width="400" class="mx-auto mt-5" />

---

# ã‚³ãƒ¼ãƒ‰è§£èª¬

#### æœ€å¾Œã«ä»¥ä¸‹ã®éƒ¨åˆ†

```js
    // ã“ã“ãŒé–¢é–€ã§ï¼Œãƒ“ãƒƒãƒˆæ¼”ç®—ã‚’ã—ã¦ã„ã‚‹
    // â€» ^ ã¯ç´¯ä¹—è¨ˆç®—ã§ã¯ãªã„ã§ã™
    r = ((v.x * 2 + 2.5) ^ (v.y + 2)) * 8;
```

`^` ã¯ [__ãƒ“ãƒƒãƒˆæ’ä»–çš„è«–ç†å’Œ(MDNï¼‰__](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Bitwise_XOR) ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã«ãªã‚Šã¾ã™ï¼

* ã“ã‚Œã«ã‚ˆã‚Šä¸€å®šæ•°å€¤é–“ã¯å€¤ãŒå›ºå®šã«ãªã‚‹
* çµæœï¼Œå¤§å°ã®å››è§’ãŒç™ºç”Ÿã™ã‚‹

â€» å¼è‡ªä½“ã®æ„å‘³ã¯åˆ†æã§ãã¾ã›ã‚“ã§ã—ãŸâ€¦ ğŸ™‡

---
layout: center
---

# çµ‚äº† ğŸ‰

<style>
h1 {
  text-align: center;
  margin-bottom: 20px;
}
</style>

---
layout: center
---

# ä½™ã£ãŸã‚‰ãƒ—ãƒ©ã‚¹ã‚¢ãƒ«ãƒ•ã‚¡ã§ä½•ã‹ã‚’æã

---
layout: center
---

## æ¬¡å›ã‚‚ä½•ã‹ã®ä½œå“ã®ã‚³ãƒ¼ãƒ‰ã‚’<br />èª­ã¿ã¤ã¤åˆ†æã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ï¼

<style>
h2 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# ãŠã—ã¾ã„
