---
theme: seriph
background: https://source.unsplash.com/collection/94734566/1920x1080
class: "text-center"
lineNumbers: false
info: |
  ## ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©è³‡æ–™#14
  VANTAN Techgord Academy
  Created by [@kuwahara_jsri](https://twitter.com/kuwahara_jsri)
fonts:
  sans: "Josefin Sans"
  serif: "Noto Sans JP"
  mono: "Fira Code"
drawings:
  persist: false
highlighter: prism-xonokai
title: ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©
css: unocss
---

# ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆp5.jsï¼‰è¬›ç¾©

VANTAN Techford Academy

### #14 ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°åŸºç¤ï¼Œlerp() ãƒ¡ã‚½ãƒƒãƒ‰

<div class="pt-12">
  <span @click="$slidev.nav.next" class="px-2 py-1 rounded cursor-pointer" hover="bg-white bg-opacity-10">
    Press Space for next page <carbon:arrow-right class="inline"/>
  </span>
</div>

<div class="abs-br m-6 flex gap-2">
  <button @click="$slidev.nav.openInEditor()" title="Open in Editor" class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon:edit />
  </button>
  <a href="https://github.com/kkeeth/vantan-techford-p5js-slide" target="_blank" alt="GitHub"
    class="text-xl icon-btn opacity-50 !border-none !hover:text-white">
    <carbon-logo-github />
  </a>
</div>

---
layout: center
class: text-center
---

# å‡ºå¸­ ğŸ™‹

---
layout: center
---

# ä»Šæ—¥è©±ã™ã“ã¨ğŸ“‹

---

# â–¼ ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°åŸºç¤ï¼Œlerp() ãƒ¡ã‚½ãƒƒãƒ‰

<br />


## ğŸ‘‰ è»½ãå‰å›ã®å¾©ç¿’
<br />

## ğŸ‘‰ ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°åŸºç¤

<br />

## ğŸ‘‰ lerp() ãƒ¡ã‚½ãƒƒãƒ‰

<br />

## ğŸ‘‰ çµµã‚„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æã


---
layout: center
---

# æˆæ¥­è³‡æ–™ğŸ“‹
<br />

[https://vantan-techford-p5js-slide.vercel.app/](https://vantan-techford-p5js-slide.vercel.app/)

<br />

<img width="600" class="mx-auto" src="/assets/1/text.png" alt="è¬›ç¾©è³‡æ–™" />

---
layout: center
---

# è»½ãå‰å›ã®å¾©ç¿’ğŸ“

---
layout: center
---

# p5.js ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã„ãã¤ã‹

---

# p5.js ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã„ãã¤ã‹

* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ : `createInput()`
* ãƒœã‚¿ãƒ³: `createButton()`
* è¦ç´ : `createElement()`
* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼š`createSlider()`

è©³ã—ãã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”å‚ç…§ãã ã•ã„ğŸ’

---
layout: center
---

# ãƒãƒ©æ›²ç·šã‚’æã

---

# ãƒãƒ©æ›²ç·šã¨ã¯ï¼Ÿ

<br />

æ¥µåº§æ¨™ `(r, Î¸)` ã«ãŠã„ã¦ï¼Œä»¥ä¸‹ã®æ–¹ç¨‹å¼ã§è¡¨ã•ã‚Œã‚‹æ›²ç·šã®ã“ã¨ğŸ’

<img src="/assets/13/rose-equation.png" class="mx-auto" width="400" />


å®Ÿéš›ã®ãƒ—ãƒ­ãƒƒãƒˆã¯ã“ã‚“ãªæ„Ÿã˜ â†’

---

<img src="/assets/13/Rose.svg" class="mx-auto" width="420" />

[ç”»åƒå…ƒ: wikipedia](https://commons.wikimedia.org/wiki/File:Rose.svg#/media/ãƒ•ã‚¡ã‚¤ãƒ«:Rose.svg)

---

# å®Ÿéš›ã«æã„ãŸ

```js
const radius = 150;
let n = 9;
let d = 4;
let x = 0;
let y = 0;
let range = 0;

function setup() {
  createCanvas(windowWidth, windowHeight);
  stroke(255)
  strokeWeight(4);
}

function draw() {
  background(0);
  translate(width / 2, height / 2);

  for (let a = 0; a < d * TAU; a += 0.01) {
    range = radius * sin(a * (n / d));
    x = range * cos(a);
    y = range * sin(a);
    point(x, y)
  }
}
```

---

# ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–


```js
ï¼ˆé€”ä¸­ç•¥ï¼‰
let angle = 0;

function setup() {
    createCanvas(windowWidth, windowHeight);
    stroke(255)
    strokeWeight(4);
    background(0);
    angleMode(DEGREES);
}

function draw() {
    translate(width / 2, height / 2);
    // ã“ã“ãŒãƒãƒ©æ›²ç·šã®å¼. radius ã‚’æ›ã‘ãªã„ã¨ã‹ãªã‚Šå°ã•ãªçµµã«ãªã£ã¦ã—ã¾ã†
    range = radius * sin(angle * (n / d));
    x = range * cos(angle);
    y = range * sin(angle);
    point(x, y)
    angle += 2;
}
```

---

# ã“ã†ãªã£ã¦ã‚Œã° OK ğŸ‘

ä¾‹ï¼š `n = 9, d = 4`

<img src="/assets/13/rose-curve-dotted.png" class="mx-auto mt-2" alt="ç‚¹æã®ãƒ—ãƒ­ãƒƒãƒˆä¾‹" />


---

# ç‚¹æã§ã¯ãªãï¼Œç·šæã«å¤‰æ›´

```diff
  let x = 0;
  let y = 0;
+ let bx = 0;
+ let by = 0;

  function draw() {
    ï¼ˆä¸­ç•¥ï¼‰

+  bx = x;
+  by = y;
   x = range * cos(angle);
   y = range * sin(angle);
-  point(x, y);
+  line(bx, by, x, y);
-  angle += 2;
+  angle += 3;
  }
```

---

# ã“ã†ãªã£ã¦ã‚Œã° OK ğŸ‘

ä¾‹ï¼š `n = 9, d = 4`

<img src="/assets/13/rose-curve-lined.png" class="mx-auto mt-2" alt="ç·šæã®ãƒ—ãƒ­ãƒƒãƒˆä¾‹" />

---

# å¾Œã¯è‰²ã‚’ä»˜ã‘ãŸã‚Šï¼Œå›è»¢ã—ãŸã‚Šï¼Œä¸­å¿ƒã‚’ç§»å‹•ã•ã›ãŸã‚Š

```diff
  // è‰²ã‚’ã¤ã‘ã‚‹
  function setup() {
    createCanvas(windowWidth, windowHeight);
-   stroke(255)
    strokeWeight(4);
-   background(0);
+   background(100);
    angleMode(DEGREES);
+   colorMode(HSB, 360, 100, 100, 100);
  }

  function draw() {
    translate(width / 2, height / 2);
+   stroke(frameCount % 360, 100, 100, 50);
  }

  // å›è»¢
+ rotate(frameCount / 5);

  // ä¸­å¿ƒåº§æ¨™ã‚’å‹•ã‹ã™
+ translate(width / 2 + 70 * cos(frameCount / 5), height / 2 + 70 * sin(frameCount / 5));
```

---

# angle ã®å€¤ã‚’å¤§ããã™ã‚‹ã¨ç¾ã—ã„ã‚‚ã®ãŒæã‘ã¾ã™

<img src="/assets/14/various-rose-curve.png" alt="ãƒãƒ©æ›²ç·šã‚’ç”¨ã„ãŸã‚¨ãƒ³ãƒ–ãƒ¬ãƒ " width="720" class="mx-auto" />

---
layout: center
---

# vartex() ãƒ¡ã‚½ãƒƒãƒ‰

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# `vertex()` ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã¯ï¼Ÿ
<br />

ãã®åã®é€šã‚Šå¤šè§’å½¢ã® `vertexï¼šé ‚ç‚¹` ã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ğŸ’

ä»¥ä¸‹ã®ã‚ˆã†ã« `beginShape(), endShape()` ã¨ã‚»ãƒƒãƒˆã§ä½¿ã†ã“ã¨ã‚’å‰æã¨ã—ã¾ã™ï¼

```js
/**
 * syntax
 *
 * @param {number} x - xåº§æ¨™
 * @param {number} y - yåº§æ¨™
 * @param {number} z - zåº§æ¨™ â€»WEBGLãƒ¢ãƒ¼ãƒ‰ã®ã¿ï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 0
 */
beginShape();

vertex(x, y, [z]); // ã“ã‚ŒãŒè¤‡æ•°å›ã‚³ãƒ¼ãƒ«ã•ã‚Œã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸

endShape();
```

---

# `beginShape(), endShape()` ãƒ¡ã‚½ãƒƒãƒ‰

<br />

ã“ã¡ã‚‰ã‚‚åå‰ã®é€šã‚Šï¼Œå›³å½¢æç”»ã®é–‹å§‹ã¨çµ‚äº†ã®å®£è¨€ï¼

```js
/**
 * syntax
 *
 * @param {constant} kind - å›³å½¢ã®ç¨®é¡ã‚’æŒ‡å®šï¼POINTS, LINES, TRIANGLE_STRIPâ€¦etc
 */
beginShape([kind]);

/**
 * syntax
 *
 * @param {constant} mode - å›³å½¢ã‚’é–‰ã˜ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šï¼CLOSE ã‹ç©ºï¼
 */
endShape([mode]);
```

ãã‚Œãã‚Œã®å®šæ•°ã«ã¤ã„ã¦è©³ã—ãã¯ [beginShape()](https://p5js.org/reference/#/p5/beginShape), [endShape()](https://p5js.org/reference/#/p5/endShape) ã‚’ã”å‚ç…§ãã ã•ã„ğŸ’

---

# vertex ã®å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã‚’å°‘ã—ã„ã˜ã‚‹

<img src="/assets/14/vertex-example.png" alt="vertex ã‚’ç”¨ã„ãŸã‚µãƒ³ãƒ—ãƒ«å›³å½¢" class="mx-auto" width="800" />

---

# `vertex()` ã®å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã‚’å°‘ã—ã„ã˜ã‚‹

```js
function setup() {
  createCanvas(400, 400)
  background(240, 240, 240);
  translate(width / 2, height / 2);

  // èƒŒæ™¯è‰²ã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚‚å¯èƒ½
  fill(237, 34, 93);
  // æ ç·šã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚‚å¯èƒ½
  // ãŸã ã—ï¼Œç‚¹ãŒç¹‹ãŒã£ã¦ã„ãªã„ã¨ä»Šå›ã®ã‚ˆã†ã«ï¼‘è¾ºã ã‘è¡¨ç¤ºã•ã‚Œãªã„
  stroke(100, 0, 255);
  strokeWeight(4);

  beginShape();
  vertex(-10, 10);
  vertex(0, 35);
  vertex(10, 10);
  vertex(35, 0);
  vertex(10, -8);
  vertex(0, -35);
  vertex(-10, -8);
  vertex(-35, 0);
  endShape(CLOSE);
}
```

---
layout: center
---

# ãƒãƒ©æ›²ç·šã‚’ç”¨ã„ã¦æ¡œã‚’æã

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# å®Œæˆç‰ˆ

<video src="/assets/13/cherry-blossoms.mp4" controls width="600" class="mt-8 mx-auto"></video>

å®Œæˆå“ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯[ã“ã¡ã‚‰](https://openprocessing.org/sketch/1643065)

---

# å‚è€ƒã‚µã‚¤ãƒˆ

#### Cinderella ã¨ã„ã†ã‚µã‚¤ãƒˆã®æ—¥æœ¬èªã‚µã‚¤ãƒˆ [CinderellaJapan](https://sites.google.com/site/cinderellajapan/huanocg/huano-qu-xian) ã¨ã„ã†ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã—ã¾ã™ğŸ’

<img src="/assets/13/cherry-blossoms.png" alt="CinderellaJapan ã®ã‚­ãƒ£ãƒ—ãƒãƒ£" width="420" class="mx-auto" />

Image By [CinderellaJapan](https://sites.google.com/site/cinderellajapan/huanocg/huano-qu-xian)

ã“ã¡ã‚‰ã‚’æ„šç›´ã«å®Ÿè£…ğŸ™‹

---

# å…ˆç¨‹ã®æ•°å¼ã‚’å†æ²


```js
/**
 * ulim = 0.8;
 * h(x):=if (x < ulim, 0, ulim - x);
 * r0(x):=(-1)^mod(floor(n / pi * x), 2) * (n / pi * x - floor(n / pi * x)) + mod(floor(n / pi * x), 2);
 * r(x):=r0(x) + 2 * h(r0(x));
 *
 * URL: https://sites.google.com/site/cinderellajapan/huanocg/huano-qu-xian
 */
```

é€”ä¸­ã«å‡ºã¦ãã‚‹ `mod()` ã¨è¨€ã†é–¢æ•°ã¯ï¼Œ__ãƒ¢ã‚¸ãƒ¥ãƒ­æ¼”ç®—__ ã¨è¨€ã£ãŸã‚Šã—ã¾ã™ğŸ’ã„ã‚ã‚†ã‚‹å‰°ä½™æ¼”ç®—å­ `%` ã®ã“ã¨ï¼

---

# å®Œæˆã‚³ãƒ¼ãƒ‰ã‚’ã–ã–ã£ã¨

```js
const ulim = 0.8
const petals = []
const NUM = 80

function setup() {
  createCanvas(windowWidth, windowHeight, WEBGL)
  noStroke()
  for (let i = 0; i < NUM; i++) {
    petals.push(new CherryBlossom())
  }
}

function draw() {
  background(0)
  for (let petal of petals) {
    petal.update()
    petal.render()
  }
}
```

---

# å®Œæˆã‚³ãƒ¼ãƒ‰ã‚’ã–ã–ã£ã¨

```js
class CherryBlossom {
  constructor() {
    this.petalNumber = 4
    this.petalSize = random(30, 70)

    // color settings
    this.r = floor(random(245, 255))
    this.g = 219
    this.b = 237
    this.alpha = random(0.8, 1)
    // moving petals
    this.xBase = random(width)
    this.xRadius = random(50, 100)
    this.xTheta = random(360)
    this.xVelocity = random(1, 2)
    this.yVelocity = this.petalSize / 30

    this.vecLocation = createVector(this.xBase, random(height))
  }
```

---

# å®Œæˆã‚³ãƒ¼ãƒ‰ã‚’ã–ã–ã£ã¨

```js
  /**
   * calculate each processings
   */
  update() {
    // moving range with X base value
    this.vecLocation.x = this.xBase + this.xRadius * sin(radians(this.xTheta))

    // from angle velocity to angle
    this.xTheta += this.xVelocity

    // fall from top to bottom
    this.vecLocation.y += this.yVelocity
    if (this.vecLocation.y > height) this.vecLocation.y = -this.petalSize
  }

/**
   * h(x):=if(x<ulim,0,ulim-x);
   *
   * @param {number} x angle(radians)
   */
  calculateH(x) {
    if (x < ulim) return 0
    else return ulim - x
  }
```

---

# å®Œæˆã‚³ãƒ¼ãƒ‰ã‚’ã–ã–ã£ã¨

```js
  render() {
    fill(`rgba(${this.r}, ${this.g} , ${this.b}, ${this.alpha})`)

    push()
    translate(this.vecLocation.x - width / 2, this.vecLocation.y - height / 2)
    rotateX(radians(this.xTheta))
    rotateY(radians(this.xTheta))
    lights()
    beginShape()
    for (let theta = 0; theta < TAU / this.petalNumber; theta += 0.01) {
      // n/pi*x
      const A = (this.petalNumber / PI) * theta
      // mod(floor(n/pi*x),2)
      const mod = floor(A) % 2
      // r0(x):=(-1)^mod(floor(n/pi*x),2)*(n/pi*x-floor(n/pi*x))+mod(floor(n/pi*x),2);
      const r0 = pow(-1, mod) * (A - floor(A)) + mod
      // r(x):=r0(x)+2*h(r0(x));
      const r = r0 + 2 * this.calculateH(r0)

      let x = this.petalSize * r * cos(theta)
      let y = this.petalSize * r * sin(theta)
      vertex(x, y)
    }
    endShape(CLOSE)
    pop()
  }
}
```

---
layout: center
---

# ã§ã¯ï¼Œæœ¬æ—¥ã®æˆæ¥­ã¸GO ğŸš€

---
layout: center
---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°åŸºç¤

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°(Easing)ã¨ã¯ï¼Ÿ

<br />

ã‚ã‚‹ç‰©ä½“ã‚’åœ°ç‚¹Aã‹ã‚‰åœ°ç‚¹Bã¾ã§ç§»å‹•ã•ã›ã‚‹ã¨ãã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®é€Ÿåº¦ã‚’å¤‰åŒ–ã•ã›ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã®ã“ã¨ğŸ’ `css` ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ãŸã“ã¨ãŒã‚ã‚‹æ–¹ãªã‚‰ï¼ŒãŠãã‚‰ãè¦‹ãŸã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ï¼

â€»å³å¯†ãªå®šç¾©ã§ã¯ãªã„ã§ã™

ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã¯å…ƒã€…Flashé–‹ç™ºè€…ã® [Robert Penner](https://en.wikipedia.org/wiki/Robert_Penner) æ°ãŒè€ƒæ¡ˆã—ãŸã‚‚ã®ã§ï¼Œã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é–¢æ•°(Easing Function)ã¨å‘¼ã°ã‚Œã‚‹æ•°å­¦ã‚’é§†ä½¿ã—ãŸé–¢æ•°ã§å®Ÿç¾ã•ã‚Œã¾ã™ï¼


---

# è«–ã‚ˆã‚Šè¨¼æ‹ 

<br />

å¤šãã‚’èªã‚‹ã‚ˆã‚Šè¦‹ãŸã»ã†ãŒæ—©ã„ã®ã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’

[https://easings.net](https://easings.net)

<img src="/assets/14/easing-demo.png" class="mx-auto" />

---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã‚’è¡¨ç¾ã™ã‚‹é–¢æ•°ç¾¤

<br />

### ã“ã¡ã‚‰ã® [gist](https://gist.github.com/gre/1650294) ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ [gre](https://gist.github.com/gre) ã•ã‚“ã¨ã„ã†æ–¹ãŒã„ã¦ï¼Œã¨ã¦ã‚‚ã‚ã‚ŠãŒãŸã„ğŸ™

ä¾‹ï¼š

```js
EasingFunctions = {
  // no easing, no acceleration
  linear: t => t,
  // accelerating from zero velocity
  easeInQuad: t => t*t,
  // decelerating to zero velocity
  easeOutQuad: t => t*(2-t),
  // acceleration until halfway, then deceleration
  easeInOutQuad: t => t<.5 ? 2*t*t : -1+(4-2*t)*t,
  ...
}
```

---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã®å®Ÿè£…

<br />

å…ˆç¨‹ã®ã‚ˆã†ãªé–¢æ•°ã‚’å°å…¥ã—ãªãã¦ã‚‚ï¼Œç°¡å˜ãªä¾‹ï¼ˆ`Linear Interpolation` ã¨è¨€ã£ãŸã‚Šã—ã¾ã™ï¼‰ã§ã‚ã‚Œã°å®Ÿè£…ã¯å¯èƒ½ãªã®ã§æ›¸ã„ã¦ã¿ã¾ã™ğŸ™‹

ã¾ãšã¯ã„ã¤ã‚‚ã®æº–å‚™ã‹ã‚‰

```js
let x = 1;
let y = 1;
let easing = 0.08;

function setup() {
  createCanvas(windowWidth, windowHeight);
  noStroke();
}
```

---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã®å®Ÿè£…ï¼ˆç¶šãï¼‰

```js
function draw() {
  background(237, 34, 93);

  x += (mouseX - x) * easing;
  y += (mouseY - y) * easing;

	ellipse(mouseX, mouseY, 30, 30);
  ellipse(x, y, 100, 100);

  push()
  stroke(0);
  strokeWeight(3)
  line(x, y, mouseX, mouseY)
  pop()
}
```

---

# ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

<img src="/assets/14/easing-mechanism.png" class="mx-auto" alt="ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ " />

---

# p5.func ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

<br />

[p5.func](https://idmnyu.github.io/p5.js-func/) ã¨è¨€ã†ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã‚Œã°ï¼Œã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã®ã¿ãªã‚‰ãšæ§˜ã€…ãªã“ã¨ãŒã‚µã‚¯ãƒƒã¨è¡Œãˆã¾ã™ã®ã§ï¼Œå‚è€ƒã¾ã§ã«ã”ç´¹ä»‹ğŸ’

<img src="/assets/14/p5-func.png" alt="p5.func ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å…¬å¼ã‚µã‚¤ãƒˆ" class="mx-auto" />


---
layout: center
---

# lerp() ãƒ¡ã‚½ãƒƒãƒ‰

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# lerp() ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã¯ï¼Ÿ

<br />

2ã¤ã®æ•°å€¤ã®é–“ã®æ•°å€¤ã‚’ï¼Œç‰¹å®šã®å¢—åˆ†ã§è¨ˆç®—ã™ã‚‹é–¢æ•°ã§ã™ğŸ’


```js
/**
 * syntax
 *
 * @param {number} start - åœ°ç‚¹Aã®å€¤
 * @param {number} stop - åœ°ç‚¹Bã®å€¤
 * @param {number} amt - è£œå®Œã™ã‚‹å€¤ï¼0 - 1
 */
lerp(start, stop, amt)

// ä¾‹
const val = lerp(0, 100, 0.5)
console.log(val)  // 50
```

---

# lerpColor() ãƒ¡ã‚½ãƒƒãƒ‰

<br />

`lerp()` ã®åŸç†ã‚’ç”¨ã„ã¦ï¼Œ2è‰²ã‚’ãƒ–ãƒ¬ãƒ³ãƒ‰ã—ã¦ãã®é–“ã®ã©ã“ã‹ã«3è‰²ç›®ã‚’è¦‹ã¤ã‘ã‚‹é–¢æ•°ã§ã™ğŸ’


```js
/**
 * syntax
 *
 * @param {p5.Color} c1 - åœ°ç‚¹Aã®å€¤
 * @param {p5.Color} c2 - åœ°ç‚¹Bã®å€¤
 * @param {number} amt - è£œå®Œã™ã‚‹å€¤ï¼0 - 1
 */
lerpColor(c1, c2, amt)

// ä¾‹
let from = color(218, 165, 32);
let to = color(72, 61, 139);

const val = lerpColor(from, to, 0.5)
console.log(val)  // p5.Color ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
```

---

# ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ lerp ã§æ›¸ãç›´ã™

<br />

å…ˆç¨‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ `lerp()` ã§æ›¸ãç›´ã™ã“ã¨ãŒã§ãã¾ã™ğŸ’

```diff
  let x = 1;
  let y = 1;
  let easing = 0.08;

  function setup() {
    createCanvas(700, 600);
    noStroke();
  }

  function draw() {
    background(237, 34, 93);

-   x += (mouseX - x) * easing;
-   y += (mouseY - y) * easing;
+   x = lerp(x, mouseX, easing);
+   y = lerp(y, mouseY, easing);
  	ellipse(mouseX, mouseY, 30, 30);
    ellipse(x, y, 100, 100);

  ï¼ˆä»¥ä¸‹ç•¥ï¼‰
}
```

---

# å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã‚’å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ğŸ™‹

<br />

`lerp()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ãŸ [å…¬å¼ã®ã‚µãƒ³ãƒ—ãƒ«](https://p5js.org/examples/color-lerp-color.html) ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’
ã“ã‚“ãªæ„Ÿã˜ã®ä½œå“ã§ã™ï¼

<video src="/assets/14/lerp-sample.mp4" controls width="600" class="mt-8 mx-auto"></video>

---

# å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã®å®Ÿè£…


### ã¾ãšã¯ã„ã¤ã‚‚ã®ï¼

```js
const num = 15;

function setup() {
  createCanvas(720, 400);
  background(255);
  noStroke();
  frameRate(5);
}
```

---

# å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã®å®Ÿè£…

### ç¶šã„ã¦ä¸­èº«ğŸ’ä»Šå›ã¯ï¼”è‰²ã®å›³å½¢ã‚’æç”»ã—ã¾ã™ï¼

```js
function draw() {
  background(255);
  from = color(255, 0, 0, 0.2 * 255);
  to = color(0, 0, 255, 0.2 * 255);
  c1 = lerpColor(from, to, 0.33);
  c2 = lerpColor(from, to, 0.66);
  for (let i = 0; i < num; i++) {
    fill(from);
    // from ã‚«ãƒ©ãƒ¼ã®å››è¾ºå½¢

    fill(c1);
    // c1ã‚«ãƒ©ãƒ¼ã®å››è¾ºå½¢

    fill(c2);
    // c2 ã‚«ãƒ©ãƒ¼ã®å››è¾ºå½¢

    fill(to);
    // to ã‚«ãƒ©ãƒ¼ã®å››è¾ºå½¢
  }
```

---

# å››è¾ºå½¢ã‚’æãï¼šquad() ãƒ¡ã‚½ãƒƒãƒ‰

<br />

ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã¯å››è¾ºå½¢ã‚’æã `quad()` ãƒ¡ã‚½ãƒƒãƒ‰ãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ï¼<br />
ã“ã¡ã‚‰ã¯åå‰ã®é€šã‚Šå››è§’å½¢ãƒ»å››è¾ºå½¢ã‚’æç”»ã™ã‚‹é–¢æ•°ã«ãªã‚Šã¾ã™ğŸ’

```js
/**
 * syntax
 *
 * @param {number} x1 - ç‚¹1ã® x åº§æ¨™
 * @param {number} y1 - ç‚¹1ã® y åº§æ¨™
 * @param {number} x2 - ç‚¹2ã® x åº§æ¨™
 * @param {number} y2 - ç‚¹2ã® y åº§æ¨™
 * @param {number} x3 - ç‚¹3ã® x åº§æ¨™
 * @param {number} y3 - ç‚¹3ã® y åº§æ¨™
 * @param {number} x4 - ç‚¹4ã® x åº§æ¨™
 * @param {number} y4 - ç‚¹4ã® y åº§æ¨™
 */
quad((x1, y1, x2, y2, x3, y3, x4, y4, [detailX], [detailY])

```

â€»1ï¼šz è»¸ã®åº§æ¨™ã‚‚æŒ‡å®šã§ãã¾ã™ãŒï¼ŒWEBGL ãƒ¢ãƒ¼ãƒ‰ã®ã¨ãã®ã¿åˆ©ç”¨å¯<br />
â€»2ï¼š`detailX, detailY` ã¯ä½™ã‚Šä½¿ã†ã“ã¨ã¯ãªã•ãã†ã§ã™

---

# å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã®å®Ÿè£…

```js
    fill(from);
    quad(
      random(-40, 220), random(height),
      ï¼ˆç•¥ï¼‰
    );
    fill(c1);
    quad(
      random(140, 380), random(height),
      ï¼ˆç•¥ï¼‰
    );
    fill(c2);
    quad(
      random(320, 580), random(height),
      ï¼ˆç•¥ï¼‰
    );
    fill(to);
    quad(
      random(500, 760), random(height),
      ï¼ˆç•¥ï¼‰
    );
  }
}
```

---
layout: center
---

# å®Œæˆ ğŸ‰

<style>
h1 {
  text-align: center;
  margin-bottom: 20px;
}
</style>

---
layout: center
---


# ä½™ã£ãŸã‚‰ã“ã¡ã‚‰ã‚’æã

<br />

ãŠãã‚‰ãå…¨ã¦ã¯ç„¡ç†ğŸ™‡

---

# å®Œæˆç‰ˆ

<img src="/assets/14/easing-demo2.png" class="mx-auto" width="800" />

---

# å®Ÿè£…

```js
// ã“ã“ã¯è‡ªç”±ã«å¤‰æ›´ã—ã¦ãã ã•ã„
const easeOutQuint = function (t) {
  return 1 + --t * t * t * t * t;
};

const moveLimit = 2500;
const dotCount = 65;
const dots = [];

function setup() {
  createCanvas(600, 600);
  colorMode(HSB);
  for (let i = 0; i < dotCount; i++) {
    dots.push(new Point());
  }
}

function draw() {
  blendMode(BLEND);
  background(240, 80, 8, 0.3);
  blendMode(SCREEN);
  for (let dot of dots) {
    dot.update();
    dot.show();
  };
}
```

---

# å®Ÿè£…ï¼ˆç¶šãï¼‰

```js
class Point {
  constructor() {
    this.x = width / 2;
    this.y = height / 2;
    this.distX = random(0, width);
    this.distY = random(0, height);
    this.preX = this.x;
    this.preY = this.y;
    this.startTime = Date.now();
    this.moveTime = 0;
    this.stopTime = 0;
    this.isMove = false;
    this.rad = random(5, 22);
    this.col = random(15, 195);
  }

  update() {/** TBD */}

  show() {
    fill(this.col, 60, 80, 1);
    noStroke();
    ellipse(this.x, this.y, this.rad);
  }
}
```

---

# å®Ÿè£…ï¼ˆç¶šãï¼‰

```js
  update() {
    if (this.isMove) {
      this.moveTime = (Date.now() - this.startTime) / moveLimit;
      this.x =
        this.preX + (this.distX - this.preX) * easeOutQuint(this.moveTime);
      this.y =
        this.preY + (this.distY - this.preY) * easeOutQuint(this.moveTime);
      if (Date.now() - this.startTime >= moveLimit) {
        this.isMove = false;
        this.stopTime = Date.now();
        this.preX = this.x;
        this.preY = this.y;
      }
    } else {
      if (Date.now() - this.stopTime > moveLimit) {
        this.isMove = true;
        this.startTime = Date.now();
        this.distX = random(0, width);
        this.distY = random(0, height);
      }
    }
  }
```

---

# å‚è€ƒå‹•ç”»

ã“ã¡ã‚‰ã® [shunsuke takao](https://www.youtube.com/@takawoshunsuke) ã•ã‚“ã®è¬›ç¾©å‹•ç”»ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã™ã®ã§ï¼Œæ˜¯éè¦–è´ã—ã¦ã¿ã¦ãã ã•ã„ï¼

https://youtu.be/-oAvo56dun4

<img src="/assets/14/youtube-takao.png" alt="youtube å‹•ç”»ã®ã‚µãƒ ãƒã‚¤ãƒ«" class="mx-auto" width="720" />

---
layout: center
---

# ä½™è«‡

<br />

ã“ã†ã„ã†äº‹ã‚‚ã§ãã‚‹ã‚‰ã—ã„ã§ã™ğŸ’

[http://blog.livedoor.jp/reona396/archives/55953225.html](http://blog.livedoor.jp/reona396/archives/55953225.html)

---
layout: center
---

## æ¬¡å›ã¯ p5.js ã«é–¢ã™ã‚‹æ§˜ã€…ãª<br>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ğŸ™‹

<style>
h2 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
  text-align: center;
}
</style>
